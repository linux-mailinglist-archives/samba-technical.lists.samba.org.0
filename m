Return-Path: <samba-technical-bounces@lists.samba.org>
X-Original-To: lists+samba-technical@lfdr.de
Delivered-To: lists+samba-technical@lfdr.de
Received: from hr1.samba.org (hr1.samba.org [IPv6:2a01:4f8:192:486::1:0])
	by mail.lfdr.de (Postfix) with ESMTPS id 997162AF7B5
	for <lists+samba-technical@lfdr.de>; Wed, 11 Nov 2020 19:07:51 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.samba.org; s=2954282; h=Cc:From:List-Id:Subject:To:Date;
	bh=AZFlZw6h7M8ubyuHdxMydEd+c+eHCjTGDGvpADOmga8=; b=Uf9XvGm18M/aeLUXdj9IcgNh3i
	LiHWS76Z1OoFbxbMfvCwNIJGgbpb8bsd0TJCElQcOEeaKbw/o7Hxpg225vk6fSawepy+F2vKUZgQl
	uwoDnQc34L2C5XGI7hl63kgSAKM7R92yEs6mM7T3gWso74r+c2kwWa7W8fstE16kRoqWox6TqdS44
	nVYWNh7bFT+Kc/mgPLK4h7rGHTC/LrrxNnOZRwoDfDfXeR5hYkv5hpaL/MP4pKzRXkXo11YX2gN4A
	LbSBYhdDyChd4WAOFJbp04SBjhyYL8dCCvE3CAopv4+GZlrAN09weX12b/8Wf/rBkyGVa+vtKT8d8
	vY/TmPhg==;
Received: from ip6-localhost ([::1]:29828 helo=hr1.samba.org) 
	by hr1.samba.org with esmtp (Exim)
	id 1kcuWb-000yXJ-IA; Wed, 11 Nov 2020 18:07:17 +0000
Received: from sky.osstech.co.jp ([153.120.181.221]:47420) 
 by hr1.samba.org with esmtps (TLS1.3:ECDHE_RSA_CHACHA20_POLY1305:256)
 (Exim) id 1kcuWU-000yXB-LU
 for samba-technical@lists.samba.org; Wed, 11 Nov 2020 18:07:14 +0000
Received: from localhost (localhost [127.0.0.1])
 by sky.osstech.co.jp (Postfix) with ESMTP id C733F33AB16F;
 Thu, 12 Nov 2020 03:07:01 +0900 (JST)
Received: from sky.osstech.co.jp ([127.0.0.1])
 by localhost (sky.osstech.co.jp [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 6mNjUP0fnZm9; Thu, 12 Nov 2020 03:07:00 +0900 (JST)
Received: from ocean.lan.osstech.co.jp (ldap1.lan.osstech.co.jp
 [222.158.192.65])
 by sky.osstech.co.jp (Postfix) with ESMTPS id CE4CF33AB16E;
 Thu, 12 Nov 2020 03:07:00 +0900 (JST)
Received: from sugar.osstech.co.jp (sugar.vpn.osstech.co.jp [10.8.1.20])
 by ocean.lan.osstech.co.jp (Postfix) with ESMTP id 833F1401246F;
 Thu, 12 Nov 2020 03:07:00 +0900 (JST)
Received: from sugar.sugar.osstech.co.jp (localhost [127.0.0.1])
 by sugar.osstech.co.jp (Postfix) with ESMTP id 586C410923B2;
 Thu, 12 Nov 2020 03:07:00 +0900 (JST)
Date: Thu, 12 Nov 2020 03:07:00 +0900
Message-ID: <87v9eb3gzf.wl-fumiyas@osstech.co.jp>
To: Andrew Bartlett <abartlet@samba.org>
Subject: Re: Eaten by autobuild?
In-Reply-To: <306c76b907c8ec78738a86629948f9d33fa555f5.camel@samba.org>
References: <b70db8da503720b24dbadcba32d95556c108d01a.camel@samba.org>
 <87pn4loc5e.wl-fumiyas@osstech.co.jp>
 <874klw3v4i.wl-fumiyas@osstech.co.jp>
 <306c76b907c8ec78738a86629948f9d33fa555f5.camel@samba.org>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) Emacs/27.1 Mule/6.0
Organization: OSS Technology Corp. Japan / Samba-JP / LDAP-JP / Apache-JP
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: multipart/mixed; boundary="Multipart_Thu_Nov_12_03:07:00_2020-1"
X-BeenThere: samba-technical@lists.samba.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Discussions on Samba internals. For general questions please
 subscribe to the list samba@lists.samba.org"
 <samba-technical.lists.samba.org>
List-Unsubscribe: <https://lists.samba.org/mailman/options/samba-technical>,
 <mailto:samba-technical-request@lists.samba.org?subject=unsubscribe>
List-Archive: <http://lists.samba.org/pipermail/samba-technical/>
List-Post: <mailto:samba-technical@lists.samba.org>
List-Help: <mailto:samba-technical-request@lists.samba.org?subject=help>
List-Subscribe: <https://lists.samba.org/mailman/listinfo/samba-technical>,
 <mailto:samba-technical-request@lists.samba.org?subject=subscribe>
From: SATOH Fumiyasu via samba-technical <samba-technical@lists.samba.org>
Reply-To: SATOH Fumiyasu <fumiyas@osstech.co.jp>
Cc: Upstream Samba Technical Mailing list <samba-technical@lists.samba.org>
Errors-To: samba-technical-bounces@lists.samba.org
Sender: "samba-technical" <samba-technical-bounces@lists.samba.org>

--Multipart_Thu_Nov_12_03:07:00_2020-1
Content-Type: text/plain; charset=US-ASCII

On Thu, 12 Nov 2020 02:21:45 +0900,
Andrew Bartlett wrote:
> Thanks for the suggestion!
> 
> Sorry I was distracted all day with some other patches, and didn't get
> back to you.  I really appriciate your work here, it will avoid much
> frustration!
> 
> Can you add your Signed-off-by to the patch so I can include it in
> Samba?
> 
> https://wiki.samba.org/index.php/Contribute#Samba_Copyright_and_Community_Policies

Attached. Thank you!

> On Wed, 2020-11-11 at 22:01 +0900, SATOH Fumiyasu via samba-technical
> wrote:
> > On Tue, 10 Nov 2020 17:21:17 +0900,
> > samba-technical@lists.samba.org wrote:
> > > How about the following patches?

-- 
-- Name: SATOH Fumiyasu @ OSS Technology Corp. (fumiyas @ osstech co jp)
-- Business Home: https://www.OSSTech.co.jp/
-- GitHub Home: https://GitHub.com/fumiyas/
-- PGP Fingerprint: BBE1 A1C9 525A 292E 6729  CDEC ADC2 9DCA 5E1C CBCA

--Multipart_Thu_Nov_12_03:07:00_2020-1
Content-Type: application/octet-stream; type=patch; name="samba-autobuild-mime-content-transfer-encoding-base64.patch"
Content-Disposition: attachment; filename="samba-autobuild-mime-content-transfer-encoding-base64.patch"
Content-Transfer-Encoding: 7bit

From a7ea7b7e4968692a6162ec1ca8bba0fcbb79ed19 Mon Sep 17 00:00:00 2001
From: SATOH Fumiyasu <fumiyas@osstech.co.jp>
Date: Tue, 10 Nov 2020 17:15:42 +0900
Subject: [PATCH] autobuild: Encode text/plain into base64 to wrap long-lines

MIMEText(text, 'plain', 'utf-8') encodes the text into
base64 and adds 'Content-Transfer-Encoding: base64' header.

Signed-off-by: SATOH Fumiyasu <fumiyas@osstech.co.jp>
---
 script/autobuild.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/script/autobuild.py b/script/autobuild.py
index 24baa0fa9f2..a76309df8a2 100755
--- a/script/autobuild.py
+++ b/script/autobuild.py
@@ -1112,7 +1112,7 @@ def send_email(subject, text, log_tar):
     outer['From'] = options.email_from
     outer['Date'] = email.utils.formatdate(localtime=True)
     outer.preamble = 'Autobuild mails are now in MIME because we optionally attach the logs.\n'
-    outer.attach(MIMEText(text, 'plain'))
+    outer.attach(MIMEText(text, 'plain', 'utf-8'))
     if options.attach_logs:
         with open(log_tar, 'rb') as fp:
             msg = MIMEApplication(fp.read(), 'gzip', email.encoders.encode_base64)
-- 
2.29.2


--Multipart_Thu_Nov_12_03:07:00_2020-1--

