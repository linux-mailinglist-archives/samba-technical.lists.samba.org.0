Return-Path: <samba-technical-bounces@lists.samba.org>
X-Original-To: lists+samba-technical@lfdr.de
Delivered-To: lists+samba-technical@lfdr.de
Received: from hr1.samba.org (hr1.samba.org [IPv6:2a01:4f8:192:486::1:0])
	by mail.lfdr.de (Postfix) with ESMTPS id 61C0DD69E8
	for <lists+samba-technical@lfdr.de>; Mon, 14 Oct 2019 21:11:03 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.samba.org; s=2954282; h=From:List-Id:Date:Subject:To:cc;
	bh=iQm2tlcHAvCCTQc/MH6fKZelUH2zlu1qYd0+ZN3nZ2M=; b=3LGyN/fHcTRL9EYBm3TaXHe5wN
	ycS8zywqAezgvZDV0LMWZxdfKaVjrStIn2lPOyOLXadWrpBbaOy8jpsan5SQ+05tEdrEnsUUDRCpw
	wBe5szCxvKDlsUk4lWt0DtqSASZQja8gc6ims7aNXSIgV8fphP95k2R2pXNBMdE2JeMleRyj/c817
	WBA/KE1eKSVwvmAWH6zr+STt1ujhu1UTw0p4m25LaWA9q1NIeNsaxxZOnMcScS59rCj6WJVHJJUz9
	EaDzHVYGsxYMNyaBwYRqbJjb1OOQfAqQqxpIK9ZvZvgG3YvBXicAdXv2SEAp2NIq+oN8WFMo1Tp0f
	qi910bEg==;
Received: from localhost ([::1]:24674 helo=hr1.samba.org) 
	by hr1.samba.org with esmtp (Exim)
	id 1iK5jH-003jOw-Qk; Mon, 14 Oct 2019 19:10:03 +0000
Received: from hr2.samba.org ([2a01:4f8:192:486::2:0]:21022) 
 by hr1.samba.org with esmtps (TLS1.3:ECDHE_RSA_CHACHA20_POLY1305:256)
 (Exim) id 1iK5jC-003jOp-SI
 for samba-technical@lists.samba.org; Mon, 14 Oct 2019 19:10:02 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=samba.org; 
 s=42; h=Date:Message-ID:From:To:CC;
 bh=iQm2tlcHAvCCTQc/MH6fKZelUH2zlu1qYd0+ZN3nZ2M=; b=ki6K4ZETWJRO0x4uNGMiJRd9BD
 oro8CUrq6RXHo6GLxxKDRiiBQdUshDB44wYPB5TU79eIvbzIPr8y72ZW27n7HTBE4tQ2FaDCg+XcH
 02qgOZwk1A8OJuVxi4zjnz4oMGie4Rhg3uxAyyxNycoSw5RDuIjaMk+9rzUWhN8C9n15qsqwZsrIj
 Wje6LpZxfp5wOppFubDzViCIIsSx/ORmjnFmw3c/XWns4uM8jMz5GLuGDVoA921RQ3C57Pbxblxna
 4HrQ/ZawzFjGbFkU1vZvWNj8qFNnnp0zIc8WJSQTvKN1O+bYY6R89xzUmHPt9GjJIcM3eoPD3SBf4
 KndNIf3TkI2oleMtz/FBY9IIwemzgLHZNziedmqN0rSfOMmou5fwKumVK2YaKh73gNnFllpI1zzli
 IMwahbaYUcOeUOl3/bIBLVWq51DkUaJ3RuyDa9yVH9+X6WpiYytKecfMz+oXeIRo4s33XCI3TMY0O
 Pq36FzMzyZ0ZHOVTXllRSDL+;
Received: from [127.0.0.2] (localhost [127.0.0.1])
 by hr2.samba.org with esmtpsa (TLS1.3:ECDHE_RSA_CHACHA20_POLY1305:256)
 (Exim) id 1iK5jC-0007ww-6Q
 for samba-technical@lists.samba.org; Mon, 14 Oct 2019 19:09:58 +0000
To: samba-technical <samba-technical@lists.samba.org>
Subject: Can anyone test the cross-compilation fix?
Message-ID: <54b9325c-2769-fb73-158c-8a1c69ecdf1c@samba.org>
Date: Mon, 14 Oct 2019 22:09:56 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.1.0
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="------------E5AF50447CF494A0EA0B779C"
Content-Language: en-US
X-BeenThere: samba-technical@lists.samba.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Discussions on Samba internals. For general questions please
 subscribe to the list samba@lists.samba.org"
 <samba-technical.lists.samba.org>
List-Unsubscribe: <https://lists.samba.org/mailman/options/samba-technical>,
 <mailto:samba-technical-request@lists.samba.org?subject=unsubscribe>
List-Archive: <http://lists.samba.org/pipermail/samba-technical/>
List-Post: <mailto:samba-technical@lists.samba.org>
List-Help: <mailto:samba-technical-request@lists.samba.org?subject=help>
List-Subscribe: <https://lists.samba.org/mailman/listinfo/samba-technical>,
 <mailto:samba-technical-request@lists.samba.org?subject=subscribe>
From: Uri Simchoni via samba-technical <samba-technical@lists.samba.org>
Reply-To: Uri Simchoni <uri@samba.org>
Errors-To: samba-technical-bounces@lists.samba.org
Sender: "samba-technical" <samba-technical-bounces@lists.samba.org>

This is a multi-part message in MIME format.
--------------E5AF50447CF494A0EA0B779C
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi!

This is a call for vendors / users who build Samba in cross-compilation 
to test a fix for a cross-compilation degradation in Samba.

Looks like the cross-compilation support for Samba has been broken ever 
since we upgraded waf to 2.0.17. Vendors / cross-build distros have been 
using some patches to work around the issue or have postponed upgrade 
from 4.9.x [1]

The primary issue (maybe only issue, maybe not) is that the 
cross-ansewers mechanism [2] is completely broken [3]. Some proposed 
fixes have been attached to the bug, some fixes have been proposed as 
merge requests. I rolled my own fix based on Thomas Nagy's guidelines in 
the bug report because:
1. Previous fixes involved setting an env var, which I wanted to avoid
2. A recent change in waf allows for a more elegant fix

The attached fix (which involves an upgrade to Waf 2.0.18) is strictly 
for the broken cross-answers issue. It's been reviewed already, but I'd 
like someone who actually builds Samba in cross-compile mode to test it 
before pushing it to master and back-porting to Samba 4.10.x/4.11.x.

Thanks,
Uri.

[1] https://gitlab.com/samba-team/samba/merge_requests/819
[2] https://wiki.samba.org/index.php/Waf#Using_--cross-answers
[3] https://bugzilla.samba.org/show_bug.cgi?id=13846

--------------E5AF50447CF494A0EA0B779C
Content-Type: text/plain; charset=UTF-8;
 name="fix-13486v2.patch.txt"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="fix-13486v2.patch.txt"

RnJvbSAwZjk3MzAwYTA0OTJjYWY0NmIxYjA3ZGQxNTNkNTY5ZWVhOGZmMjBiIE1vbiBTZXAg
MTcgMDA6MDA6MDAgMjAwMQpGcm9tOiBVcmkgU2ltY2hvbmkgPHVyaUBzYW1iYS5vcmc+CkRh
dGU6IE1vbiwgNyBPY3QgMjAxOSAwMDozNjo0MiArMDMwMApTdWJqZWN0OiBbUEFUQ0ggMS81
XSB3YWY6IHVwZ3JhZGUgdG8gMi4wLjE4CgpUaGlzIGlzIHJlcXVpcmVkIHRvIGdldCB0aGUg
bmV3IHRlc3RfYXJncyBwYXJhbWV0ZXIgdG8gY29uZi5jaGVjaywgd2hpY2gKZmFjaWxpdGF0
ZXMgcGFzc2luZyBhcmd1bWVudHMgdG8gY29uZmlndXJhdGlvbiB0ZXN0IHByb2dyYW1zLgoK
QlVHOiBodHRwczovL2J1Z3ppbGxhLnNhbWJhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM4NDYK
ClNpZ25lZC1vZmYtYnk6IFVyaSBTaW1jaG9uaSA8dXJpQHNhbWJhLm9yZz4KLS0tCiBidWls
ZHRvb2xzL2Jpbi93YWYgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgIDIgKy0KIGJ1
aWxkdG9vbHMvd2Fmc2FtYmEvd2Fmc2FtYmEucHkgICAgICAgICAgICAgICB8ICAgMiArLQog
dGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Db25maWd1cmUucHkgICAgICAgICAgIHwgIDIwICst
CiB0aGlyZF9wYXJ0eS93YWYvd2FmbGliL0NvbnRleHQucHkgICAgICAgICAgICAgfCAgIDYg
Ky0KIHRoaXJkX3BhcnR5L3dhZi93YWZsaWIvU2NyaXB0aW5nLnB5ICAgICAgICAgICB8ICAg
NyArLQogdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9UYXNrR2VuLnB5ICAgICAgICAgICAgIHwg
ICAyICstCiB0aGlyZF9wYXJ0eS93YWYvd2FmbGliL1Rvb2xzL2FzbS5weSAgICAgICAgICAg
fCAgMzcgKysrLQogdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9jX2FsaWFzZXMucHkg
ICAgIHwgICA2ICstCiB0aGlyZF9wYXJ0eS93YWYvd2FmbGliL1Rvb2xzL2NfY29uZmlnLnB5
ICAgICAgfCAgIDkgKy0KIHRoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9vbHMvY190ZXN0cy5w
eSAgICAgICB8ICAgMyArLQogdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9nYXMucHkg
ICAgICAgICAgIHwgICAxICsKIHRoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9vbHMvamF2YXcu
cHkgICAgICAgICB8ICAgMiArLQogdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9uYXNt
LnB5ICAgICAgICAgIHwgICA1ICsKIHRoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9vbHMvcHl0
aG9uLnB5ICAgICAgICB8ICAyNyArKy0KIHRoaXJkX3BhcnR5L3dhZi93YWZsaWIvZXh0cmFz
L2RveHlnZW4ucHkgICAgICB8ICAxMSArLQogdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9leHRy
YXMvZmFzdF9wYXJ0aWFsLnB5IHwgIDI4ICsrLQogdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9l
eHRyYXMvZ2VucHliaW5kLnB5ICAgIHwgMTk0ICsrKysrKysrKysrKysrKysrKwogdGhpcmRf
cGFydHkvd2FmL3dhZmxpYi9leHRyYXMvbG9jYWxfcnBhdGgucHkgIHwgICA4ICstCiB0aGly
ZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9vYmpjb3B5LnB5ICAgICAgfCAgIDkgKy0KIDE5
IGZpbGVzIGNoYW5nZWQsIDMyOSBpbnNlcnRpb25zKCspLCA1MCBkZWxldGlvbnMoLSkKIGNy
ZWF0ZSBtb2RlIDEwMDY0NCB0aGlyZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9nZW5weWJp
bmQucHkKCmRpZmYgLS1naXQgYS9idWlsZHRvb2xzL2Jpbi93YWYgYi9idWlsZHRvb2xzL2Jp
bi93YWYKaW5kZXggODQxM2YyMzMyYjcuLjExY2U4ZTc0ODBhIDEwMDc1NQotLS0gYS9idWls
ZHRvb2xzL2Jpbi93YWYKKysrIGIvYnVpbGR0b29scy9iaW4vd2FmCkBAIC0zMiw3ICszMiw3
IEBAIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgogCiBpbXBvcnQgb3MsIHN5cywgaW5z
cGVjdAogCi1WRVJTSU9OPSIyLjAuMTciCitWRVJTSU9OPSIyLjAuMTgiCiBSRVZJU0lPTj0i
eCIKIEdJVD0ieCIKIElOU1RBTEw9IngiCmRpZmYgLS1naXQgYS9idWlsZHRvb2xzL3dhZnNh
bWJhL3dhZnNhbWJhLnB5IGIvYnVpbGR0b29scy93YWZzYW1iYS93YWZzYW1iYS5weQppbmRl
eCA3NmQ2NWViZmNiNi4uMjA1ZDViNGFjMzIgMTAwNjQ0Ci0tLSBhL2J1aWxkdG9vbHMvd2Fm
c2FtYmEvd2Fmc2FtYmEucHkKKysrIGIvYnVpbGR0b29scy93YWZzYW1iYS93YWZzYW1iYS5w
eQpAQCAtMzgsNyArMzgsNyBAQCBMSUJfUEFUSD0ic2hhcmVkIgogCiBvcy5lbnZpcm9uWydQ
WVRIT05VTkJVRkZFUkVEJ10gPSAnMScKIAotaWYgQ29udGV4dC5IRVhWRVJTSU9OIG5vdCBp
biAoMHgyMDAxMTAwLCk6CitpZiBDb250ZXh0LkhFWFZFUlNJT04gbm90IGluICgweDIwMDEy
MDAsKToKICAgICBMb2dzLmVycm9yKCcnJwogUGxlYXNlIHVzZSB0aGUgdmVyc2lvbiBvZiB3
YWYgdGhhdCBjb21lcyB3aXRoIFNhbWJhLCBub3QKIGEgc3lzdGVtIGluc3RhbGxlZCB2ZXJz
aW9uLiBTZWUgaHR0cDovL3dpa2kuc2FtYmEub3JnL2luZGV4LnBocC9XYWYKZGlmZiAtLWdp
dCBhL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvQ29uZmlndXJlLnB5IGIvdGhpcmRfcGFydHkv
d2FmL3dhZmxpYi9Db25maWd1cmUucHkKaW5kZXggZGIwOWMwZTNhNDAuLjU3NjJlYjY2OTU0
IDEwMDY0NAotLS0gYS90aGlyZF9wYXJ0eS93YWYvd2FmbGliL0NvbmZpZ3VyZS5weQorKysg
Yi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL0NvbmZpZ3VyZS5weQpAQCAtNTI0LDcgKzUyNCw3
IEBAIGRlZiBydW5fYnVpbGQoc2VsZiwgKmssICoqa3cpOgogCVRob3VnaCB0aGlzIGZ1bmN0
aW9uIHJldHVybnMgKjAqIGJ5IGRlZmF1bHQsIHRoZSBidWlsZCBtYXkgc2V0IGFuIGF0dHJp
YnV0ZSBuYW1lZCAqcmV0dmFsKiBvbiB0aGUKIAlidWlsZCBjb250ZXh0IG9iamVjdCB0byBy
ZXR1cm4gYSBwYXJ0aWN1bGFyIHZhbHVlLiBTZWUgOnB5OmZ1bmM6YHdhZmxpYi5Ub29scy5j
X2NvbmZpZy50ZXN0X2V4ZWNfZnVuYCBmb3IgZXhhbXBsZS4KIAotCVRoaXMgZnVuY3Rpb24g
YWxzbyBwcm92aWRlcyBhIGxpbWl0ZWQgY2FjaGUuIFRvIHVzZSBpdCwgcHJvdmlkZSB0aGUg
Zm9sbG93aW5nIG9wdGlvbjo6CisJVGhpcyBmdW5jdGlvbiBhbHNvIGZlYXR1cmVzIGEgY2Fj
aGUgd2hpY2ggY2FuIGJlIGVuYWJsZWQgYnkgdGhlIGZvbGxvd2luZyBvcHRpb246OgogCiAJ
CWRlZiBvcHRpb25zKG9wdCk6CiAJCQlvcHQuYWRkX29wdGlvbignLS1jb25mY2FjaGUnLCBk
ZXN0PSdjb25mY2FjaGUnLCBkZWZhdWx0PTAsCkBAIC01MzUsMTAgKzUzNSwyMSBAQCBkZWYg
cnVuX2J1aWxkKHNlbGYsICprLCAqKmt3KToKIAkJJCB3YWYgY29uZmlndXJlIC0tY29uZmNh
Y2hlCiAKIAkiIiIKLQlsc3QgPSBbc3RyKHYpIGZvciAocCwgdikgaW4ga3cuaXRlbXMoKSBp
ZiBwICE9ICdlbnYnXQotCWggPSBVdGlscy5oX2xpc3QobHN0KQorCWJ1ZiA9IFtdCisJZm9y
IGtleSBpbiBzb3J0ZWQoa3cua2V5cygpKToKKwkJdiA9IGt3W2tleV0KKwkJaWYgaGFzYXR0
cih2LCAnX19jYWxsX18nKToKKwkJCWJ1Zi5hcHBlbmQoVXRpbHMuaF9mdW4odikpCisJCWVs
c2U6CisJCQlidWYuYXBwZW5kKHN0cih2KSkKKwloID0gVXRpbHMuaF9saXN0KGJ1ZikKIAlk
aXIgPSBzZWxmLmJsZG5vZGUuYWJzcGF0aCgpICsgb3Muc2VwICsgKG5vdCBVdGlscy5pc193
aW4zMiBhbmQgJy4nIG9yICcnKSArICdjb25mX2NoZWNrXycgKyBVdGlscy50b19oZXgoaCkK
IAorCWNhY2hlbW9kZSA9IGt3LmdldCgnY29uZmNhY2hlJywgZ2V0YXR0cihPcHRpb25zLm9w
dGlvbnMsICdjb25mY2FjaGUnLCBOb25lKSkKKworCWlmIG5vdCBjYWNoZW1vZGUgYW5kIG9z
LnBhdGguZXhpc3RzKGRpcik6CisJCXNodXRpbC5ybXRyZWUoZGlyKQorCiAJdHJ5OgogCQlv
cy5tYWtlZGlycyhkaXIpCiAJZXhjZXB0IE9TRXJyb3I6CkBAIC01NDksNyArNTYwLDYgQEAg
ZGVmIHJ1bl9idWlsZChzZWxmLCAqaywgKiprdyk6CiAJZXhjZXB0IE9TRXJyb3I6CiAJCXNl
bGYuZmF0YWwoJ2Nhbm5vdCB1c2UgdGhlIGNvbmZpZ3VyYXRpb24gdGVzdCBmb2xkZXIgJXIn
ICUgZGlyKQogCi0JY2FjaGVtb2RlID0gZ2V0YXR0cihPcHRpb25zLm9wdGlvbnMsICdjb25m
Y2FjaGUnLCBOb25lKQogCWlmIGNhY2hlbW9kZSA9PSAxOgogCQl0cnk6CiAJCQlwcm9qID0g
Q29uZmlnU2V0LkNvbmZpZ1NldChvcy5wYXRoLmpvaW4oZGlyLCAnY2FjaGVfcnVuX2J1aWxk
JykpCkBAIC01ODksNyArNTk5LDcgQEAgZGVmIHJ1bl9idWlsZChzZWxmLCAqaywgKiprdyk6
CiAJCWVsc2U6CiAJCQlyZXQgPSBnZXRhdHRyKGJsZCwgJ3JldHZhbCcsIDApCiAJZmluYWxs
eToKLQkJaWYgY2FjaGVtb2RlID09IDE6CisJCWlmIGNhY2hlbW9kZToKIAkJCSMgY2FjaGUg
dGhlIHJlc3VsdHMgZWFjaCB0aW1lCiAJCQlwcm9qID0gQ29uZmlnU2V0LkNvbmZpZ1NldCgp
CiAJCQlwcm9qWydjYWNoZV9ydW5fYnVpbGQnXSA9IHJldApkaWZmIC0tZ2l0IGEvdGhpcmRf
cGFydHkvd2FmL3dhZmxpYi9Db250ZXh0LnB5IGIvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9D
b250ZXh0LnB5CmluZGV4IGQwNzU5YWFkYTU4Li5lMzMwNWZhMzM0MSAxMDA2NDQKLS0tIGEv
dGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Db250ZXh0LnB5CisrKyBiL3RoaXJkX3BhcnR5L3dh
Zi93YWZsaWIvQ29udGV4dC5weQpAQCAtMTEsMTMgKzExLDEzIEBAIGZyb20gd2FmbGliIGlt
cG9ydCBVdGlscywgRXJyb3JzLCBMb2dzCiBpbXBvcnQgd2FmbGliLk5vZGUKIAogIyB0aGUg
Zm9sbG93aW5nIDMgY29uc3RhbnRzIGFyZSB1cGRhdGVkIG9uIGVhY2ggbmV3IHJlbGVhc2Ug
KGRvIG5vdCB0b3VjaCkKLUhFWFZFUlNJT049MHgyMDAxMTAwCitIRVhWRVJTSU9OPTB4MjAw
MTIwMAogIiIiQ29uc3RhbnQgdXBkYXRlZCBvbiBuZXcgcmVsZWFzZXMiIiIKIAotV0FGVkVS
U0lPTj0iMi4wLjE3IgorV0FGVkVSU0lPTj0iMi4wLjE4IgogIiIiQ29uc3RhbnQgdXBkYXRl
ZCBvbiBuZXcgcmVsZWFzZXMiIiIKIAotV0FGUkVWSVNJT049IjZiYzZjYjU5OWM3MDJlOTg1
NzgwZTlmNzA1YjI5MWI4MTIxMjM2OTMiCitXQUZSRVZJU0lPTj0iMzE0Njg5Yjg5OTQyNTlh
ODRmMGRlMGFhZWY3NGQ3Y2U5MWY1NDFhZCIKICIiIkdpdCByZXZpc2lvbiB3aGVuIHRoZSB3
YWYgdmVyc2lvbiBpcyB1cGRhdGVkIiIiCiAKIEFCSSA9IDIwCmRpZmYgLS1naXQgYS90aGly
ZF9wYXJ0eS93YWYvd2FmbGliL1NjcmlwdGluZy5weSBiL3RoaXJkX3BhcnR5L3dhZi93YWZs
aWIvU2NyaXB0aW5nLnB5CmluZGV4IGFlMTdhOGI0NTAzLi42OGRjY2YyOWNlMCAxMDA2NDQK
LS0tIGEvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9TY3JpcHRpbmcucHkKKysrIGIvdGhpcmRf
cGFydHkvd2FmL3dhZmxpYi9TY3JpcHRpbmcucHkKQEAgLTMzMiw3ICszMzIsMTIgQEAgZGVm
IGRpc3RjbGVhbihjdHgpOgogCQllbHNlOgogCQkJcmVtb3ZlX2FuZF9sb2coZW52Lm91dF9k
aXIsIHNodXRpbC5ybXRyZWUpCiAKLQkJZm9yIGsgaW4gKGVudi5vdXRfZGlyLCBlbnYudG9w
X2RpciwgZW52LnJ1bl9kaXIpOgorCQllbnZfZGlycyA9IFtlbnYub3V0X2Rpcl0KKwkJaWYg
bm90IGN0eC5vcHRpb25zLm5vX2xvY2tfaW5fdG9wOgorCQkJZW52X2RpcnMuYXBwZW5kKGVu
di50b3BfZGlyKQorCQlpZiBub3QgY3R4Lm9wdGlvbnMubm9fbG9ja19pbl9ydW46CisJCQll
bnZfZGlycy5hcHBlbmQoZW52LnJ1bl9kaXIpCisJCWZvciBrIGluIGVudl9kaXJzOgogCQkJ
cCA9IG9zLnBhdGguam9pbihrLCBPcHRpb25zLmxvY2tmaWxlKQogCQkJcmVtb3ZlX2FuZF9s
b2cocCwgb3MucmVtb3ZlKQogCmRpZmYgLS1naXQgYS90aGlyZF9wYXJ0eS93YWYvd2FmbGli
L1Rhc2tHZW4ucHkgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL1Rhc2tHZW4ucHkKaW5kZXgg
NTMyYjdkNWNkYjQuLmY4ZjkyYmQ1N2MxIDEwMDY0NAotLS0gYS90aGlyZF9wYXJ0eS93YWYv
d2FmbGliL1Rhc2tHZW4ucHkKKysrIGIvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9UYXNrR2Vu
LnB5CkBAIC05MDUsNyArOTA1LDcgQEAgZGVmIHByb2Nlc3Nfc3Vic3Qoc2VsZik6CiAJCSMg
cGFyYW5vaWQgc2FmZXR5IG1lYXN1cmUgZm9yIHRoZSBnZW5lcmFsIGNhc2UgZm9vLmluLT5m
b28uaCB3aXRoIGFtYmlndW91cyBkZXBlbmRlbmNpZXMKIAkJZm9yIHh0IGluIEhFQURFUl9F
WFRTOgogCQkJaWYgYi5uYW1lLmVuZHN3aXRoKHh0KToKLQkJCQl0c2suZXh0X2luID0gdHNr
LmV4dF9pbiArIFsnLmgnXQorCQkJCXRzay5leHRfb3V0ID0gdHNrLmV4dF9vdXQgKyBbJy5o
J10KIAkJCQlicmVhawogCiAJCWluc3RfdG8gPSBnZXRhdHRyKHNlbGYsICdpbnN0YWxsX3Bh
dGgnLCBOb25lKQpkaWZmIC0tZ2l0IGEvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9h
c20ucHkgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL1Rvb2xzL2FzbS5weQppbmRleCBiNmYy
NmZiM2RmMy4uYTU3ZTgzYmI1ZWMgMTAwNjQ0Ci0tLSBhL3RoaXJkX3BhcnR5L3dhZi93YWZs
aWIvVG9vbHMvYXNtLnB5CisrKyBiL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9vbHMvYXNt
LnB5CkBAIC0zNCw5ICszNCwyMiBAQCBTdXBwb3J0IGZvciBwdXJlIGFzbSBwcm9ncmFtcyBh
bmQgbGlicmFyaWVzIHNob3VsZCBhbHNvIHdvcms6OgogCQkJdGFyZ2V0ID0gJ2FzbXRlc3Qn
KQogIiIiCiAKLWZyb20gd2FmbGliIGltcG9ydCBUYXNrCitpbXBvcnQgcmUKK2Zyb20gd2Fm
bGliIGltcG9ydCBFcnJvcnMsIExvZ3MsIFRhc2sKIGZyb20gd2FmbGliLlRvb2xzLmNjcm9v
dCBpbXBvcnQgbGlua190YXNrLCBzdGxpbmtfdGFzawogZnJvbSB3YWZsaWIuVGFza0dlbiBp
bXBvcnQgZXh0ZW5zaW9uCitmcm9tIHdhZmxpYi5Ub29scyBpbXBvcnQgY19wcmVwcm9jCisK
K3JlX2xpbmVzID0gcmUuY29tcGlsZSgKKwknXlsgXHRdKig/OiUpWyBcdF0qKGlmZGVmfGlm
bmRlZnxpZnxlbHNlfGVsaWZ8ZW5kaWZ8aW5jbHVkZXxpbXBvcnR8ZGVmaW5lfHVuZGVmKVsg
XHRdKiguKilcciokJywKKwlyZS5JR05PUkVDQVNFIHwgcmUuTVVMVElMSU5FKQorCitjbGFz
cyBhc21fcGFyc2VyKGNfcHJlcHJvYy5jX3BhcnNlcik6CisJZGVmIGZpbHRlcl9jb21tZW50
cyhzZWxmLCBub2RlKToKKwkJY29kZSA9IG5vZGUucmVhZCgpCisJCWNvZGUgPSBjX3ByZXBy
b2MucmVfbmwuc3ViKCcnLCBjb2RlKQorCQljb2RlID0gY19wcmVwcm9jLnJlX2NwcC5zdWIo
Y19wcmVwcm9jLnJlcGwsIGNvZGUpCisJCXJldHVybiByZV9saW5lcy5maW5kYWxsKGNvZGUp
CiAKIGNsYXNzIGFzbShUYXNrLlRhc2spOgogCSIiIgpAQCAtNDUsNiArNTgsMjggQEAgY2xh
c3MgYXNtKFRhc2suVGFzayk6CiAJY29sb3IgPSAnQkxVRScKIAlydW5fc3RyID0gJyR7QVN9
ICR7QVNGTEFHU30gJHtBU01QQVRIX1NUOklOQ1BBVEhTfSAke0RFRklORVNfU1Q6REVGSU5F
U30gJHtBU19TUkNfRn0ke1NSQ30gJHtBU19UR1RfRn0ke1RHVH0nCiAKKwlkZWYgc2Nhbihz
ZWxmKToKKwkJaWYgc2VsZi5lbnYuQVNNX05BTUUgPT0gJ2dhcyc6CisJCQlyZXR1cm4gY19w
cmVwcm9jLnNjYW4oc2VsZikKKwkJCUxvZ3Mud2FybignVGhlcmUgaXMgbm8gZGVwZW5kZW5j
eSBzY2FubmVyIGZvciBOYXNtIScpCisJCQlyZXR1cm4gIFtbXSwgW11dCisJCWVsaWYgc2Vs
Zi5lbnYuQVNNX05BTUUgPT0gJ25hc20nOgorCQkJTG9ncy53YXJuKCdUaGUgTmFzbSBkZXBl
bmRlbmN5IHNjYW5uZXIgaXMgaW5jb21wbGV0ZSEnKQorCisJCXRyeToKKwkJCWluY24gPSBz
ZWxmLmdlbmVyYXRvci5pbmNsdWRlc19ub2RlcworCQlleGNlcHQgQXR0cmlidXRlRXJyb3I6
CisJCQlyYWlzZSBFcnJvcnMuV2FmRXJyb3IoJyVyIGlzIG1pc3NpbmcgdGhlICJhc20iIGZl
YXR1cmUnICUgc2VsZi5nZW5lcmF0b3IpCisKKwkJaWYgY19wcmVwcm9jLmdvX2Fic29sdXRl
OgorCQkJbm9kZXBhdGhzID0gaW5jbgorCQllbHNlOgorCQkJbm9kZXBhdGhzID0gW3ggZm9y
IHggaW4gaW5jbiBpZiB4LmlzX2NoaWxkX29mKHguY3R4LnNyY25vZGUpIG9yIHguaXNfY2hp
bGRfb2YoeC5jdHguYmxkbm9kZSldCisKKwkJdG1wID0gYXNtX3BhcnNlcihub2RlcGF0aHMp
CisJCXRtcC5zdGFydChzZWxmLmlucHV0c1swXSwgc2VsZi5lbnYpCisJCXJldHVybiAodG1w
Lm5vZGVzLCB0bXAubmFtZXMpCisKIEBleHRlbnNpb24oJy5zJywgJy5TJywgJy5hc20nLCAn
LkFTTScsICcuc3BwJywgJy5TUFAnKQogZGVmIGFzbV9ob29rKHNlbGYsIG5vZGUpOgogCSIi
IgpkaWZmIC0tZ2l0IGEvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9jX2FsaWFzZXMu
cHkgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL1Rvb2xzL2NfYWxpYXNlcy5weQppbmRleCBj
OWQ1MzY5MmU4Zi4uOTg1ZTA0OGJkYjcgMTAwNjQ0Ci0tLSBhL3RoaXJkX3BhcnR5L3dhZi93
YWZsaWIvVG9vbHMvY19hbGlhc2VzLnB5CisrKyBiL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIv
VG9vbHMvY19hbGlhc2VzLnB5CkBAIC00NywxMCArNDcsMTIgQEAgZGVmIHNuaWZmX2ZlYXR1
cmVzKCoqa3cpOgogCQlpZiB4IGluIGV4dHM6CiAJCQlmZWF0cy5hcHBlbmQoJ2N4eCcpCiAJ
CQlicmVhawotCiAJaWYgJ2MnIGluIGV4dHMgb3IgJ3ZhbGEnIGluIGV4dHMgb3IgJ2dzJyBp
biBleHRzOgogCQlmZWF0cy5hcHBlbmQoJ2MnKQogCisJaWYgJ3MnIGluIGV4dHMgb3IgJ1Mn
IGluIGV4dHM6CisJCWZlYXRzLmFwcGVuZCgnYXNtJykKKwogCWZvciB4IGluICdmIGY5MCBG
IEY5MCBmb3IgRk9SJy5zcGxpdCgpOgogCQlpZiB4IGluIGV4dHM6CiAJCQlmZWF0cy5hcHBl
bmQoJ2ZjJykKQEAgLTY2LDcgKzY4LDcgQEAgZGVmIHNuaWZmX2ZlYXR1cmVzKCoqa3cpOgog
CWlmIHR5cCBpbiAoJ3Byb2dyYW0nLCAnc2hsaWInLCAnc3RsaWInKToKIAkJd2lsbF9saW5r
ID0gRmFsc2UKIAkJZm9yIHggaW4gZmVhdHM6Ci0JCQlpZiB4IGluICgnY3h4JywgJ2QnLCAn
ZmMnLCAnYycpOgorCQkJaWYgeCBpbiAoJ2N4eCcsICdkJywgJ2ZjJywgJ2MnLCAnYXNtJyk6
CiAJCQkJZmVhdHMuYXBwZW5kKHggKyB0eXApCiAJCQkJd2lsbF9saW5rID0gVHJ1ZQogCQlp
ZiBub3Qgd2lsbF9saW5rIGFuZCBub3Qga3cuZ2V0KCdmZWF0dXJlcycsIFtdKToKZGlmZiAt
LWdpdCBhL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9vbHMvY19jb25maWcucHkgYi90aGly
ZF9wYXJ0eS93YWYvd2FmbGliL1Rvb2xzL2NfY29uZmlnLnB5CmluZGV4IGQ1NDZiZTk1NjE0
Li44MDU4MGNjOWZjYiAxMDA2NDQKLS0tIGEvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29s
cy9jX2NvbmZpZy5weQorKysgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL1Rvb2xzL2NfY29u
ZmlnLnB5CkBAIC02NTksMjAgKzY1OSwyMSBAQCBjbGFzcyB0ZXN0X2V4ZWMoVGFzay5UYXNr
KToKIAkiIiIKIAljb2xvciA9ICdQSU5LJwogCWRlZiBydW4oc2VsZik6CisJCWNtZCA9IFtz
ZWxmLmlucHV0c1swXS5hYnNwYXRoKCldICsgZ2V0YXR0cihzZWxmLmdlbmVyYXRvciwgJ3Rl
c3RfYXJncycsIFtdKQogCQlpZiBnZXRhdHRyKHNlbGYuZ2VuZXJhdG9yLCAncnBhdGgnLCBO
b25lKToKIAkJCWlmIGdldGF0dHIoc2VsZi5nZW5lcmF0b3IsICdkZWZpbmVfcmV0JywgRmFs
c2UpOgotCQkJCXNlbGYuZ2VuZXJhdG9yLmJsZC5yZXR2YWwgPSBzZWxmLmdlbmVyYXRvci5i
bGQuY21kX2FuZF9sb2coW3NlbGYuaW5wdXRzWzBdLmFic3BhdGgoKV0pCisJCQkJc2VsZi5n
ZW5lcmF0b3IuYmxkLnJldHZhbCA9IHNlbGYuZ2VuZXJhdG9yLmJsZC5jbWRfYW5kX2xvZyhj
bWQpCiAJCQllbHNlOgotCQkJCXNlbGYuZ2VuZXJhdG9yLmJsZC5yZXR2YWwgPSBzZWxmLmdl
bmVyYXRvci5ibGQuZXhlY19jb21tYW5kKFtzZWxmLmlucHV0c1swXS5hYnNwYXRoKCldKQor
CQkJCXNlbGYuZ2VuZXJhdG9yLmJsZC5yZXR2YWwgPSBzZWxmLmdlbmVyYXRvci5ibGQuZXhl
Y19jb21tYW5kKGNtZCkKIAkJZWxzZToKIAkJCWVudiA9IHNlbGYuZW52LmVudiBvciB7fQog
CQkJZW52LnVwZGF0ZShkaWN0KG9zLmVudmlyb24pKQogCQkJZm9yIHZhciBpbiAoJ0xEX0xJ
QlJBUllfUEFUSCcsICdEWUxEX0xJQlJBUllfUEFUSCcsICdQQVRIJyk6CiAJCQkJZW52W3Zh
cl0gPSBzZWxmLmlucHV0c1swXS5wYXJlbnQuYWJzcGF0aCgpICsgb3MucGF0aC5wYXRoc2Vw
ICsgZW52LmdldCh2YXIsICcnKQogCQkJaWYgZ2V0YXR0cihzZWxmLmdlbmVyYXRvciwgJ2Rl
ZmluZV9yZXQnLCBGYWxzZSk6Ci0JCQkJc2VsZi5nZW5lcmF0b3IuYmxkLnJldHZhbCA9IHNl
bGYuZ2VuZXJhdG9yLmJsZC5jbWRfYW5kX2xvZyhbc2VsZi5pbnB1dHNbMF0uYWJzcGF0aCgp
XSwgZW52PWVudikKKwkJCQlzZWxmLmdlbmVyYXRvci5ibGQucmV0dmFsID0gc2VsZi5nZW5l
cmF0b3IuYmxkLmNtZF9hbmRfbG9nKGNtZCwgZW52PWVudikKIAkJCWVsc2U6Ci0JCQkJc2Vs
Zi5nZW5lcmF0b3IuYmxkLnJldHZhbCA9IHNlbGYuZ2VuZXJhdG9yLmJsZC5leGVjX2NvbW1h
bmQoW3NlbGYuaW5wdXRzWzBdLmFic3BhdGgoKV0sIGVudj1lbnYpCisJCQkJc2VsZi5nZW5l
cmF0b3IuYmxkLnJldHZhbCA9IHNlbGYuZ2VuZXJhdG9yLmJsZC5leGVjX2NvbW1hbmQoY21k
LCBlbnY9ZW52KQogCiBAZmVhdHVyZSgndGVzdF9leGVjJykKIEBhZnRlcl9tZXRob2QoJ2Fw
cGx5X2xpbmsnKQpkaWZmIC0tZ2l0IGEvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9j
X3Rlc3RzLnB5IGIvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9jX3Rlc3RzLnB5Cmlu
ZGV4IGY4NThkZjU3NjNjLi43YTQwOTRmMjQ1MCAxMDA2NDQKLS0tIGEvdGhpcmRfcGFydHkv
d2FmL3dhZmxpYi9Ub29scy9jX3Rlc3RzLnB5CisrKyBiL3RoaXJkX3BhcnR5L3dhZi93YWZs
aWIvVG9vbHMvY190ZXN0cy5weQpAQCAtMjI0LDYgKzIyNCw3IEBAIGRlZiBjaGVja19lbmRp
YW5uZXNzKHNlbGYpOgogCWRlZiBjaGVja19tc2coc2VsZik6CiAJCXJldHVybiB0bXBbMF0K
IAlzZWxmLmNoZWNrKGZyYWdtZW50PUVORElBTl9GUkFHTUVOVCwgZmVhdHVyZXM9J2MgZ3Jl
cF9mb3JfZW5kaWFubmVzcycsCi0JCW1zZz0nQ2hlY2tpbmcgZm9yIGVuZGlhbm5lc3MnLCBk
ZWZpbmU9J0VORElBTk5FU1MnLCB0bXA9dG1wLCBva21zZz1jaGVja19tc2cpCisJCW1zZz0n
Q2hlY2tpbmcgZm9yIGVuZGlhbm5lc3MnLCBkZWZpbmU9J0VORElBTk5FU1MnLCB0bXA9dG1w
LAorCQlva21zZz1jaGVja19tc2csIGNvbmZjYWNoZT1Ob25lKQogCXJldHVybiB0bXBbMF0K
IApkaWZmIC0tZ2l0IGEvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9nYXMucHkgYi90
aGlyZF9wYXJ0eS93YWYvd2FmbGliL1Rvb2xzL2dhcy5weQppbmRleCA3N2FmZWQ3MDM4Zi4u
NGE4NzQ1YWZkN2UgMTAwNjQ0Ci0tLSBhL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9vbHMv
Z2FzLnB5CisrKyBiL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9vbHMvZ2FzLnB5CkBAIC0x
NiwzICsxNiw0IEBAIGRlZiBjb25maWd1cmUoY29uZik6CiAJY29uZi5lbnYuQVNMTktfVEdU
X0YgPSBbJy1vJ10KIAljb25mLmZpbmRfYXIoKQogCWNvbmYubG9hZCgnYXNtJykKKwljb25m
LmVudi5BU01fTkFNRSA9ICdnYXMnCmRpZmYgLS1naXQgYS90aGlyZF9wYXJ0eS93YWYvd2Fm
bGliL1Rvb2xzL2phdmF3LnB5IGIvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9qYXZh
dy5weQppbmRleCBmZDFjZjQ2OWFiZi4uY2ViMDhjMjhjODcgMTAwNjQ0Ci0tLSBhL3RoaXJk
X3BhcnR5L3dhZi93YWZsaWIvVG9vbHMvamF2YXcucHkKKysrIGIvdGhpcmRfcGFydHkvd2Fm
L3dhZmxpYi9Ub29scy9qYXZhdy5weQpAQCAtMjQ2LDcgKzI0Niw3IEBAIGRlZiB1c2VfamF2
YWNfZmlsZXMoc2VsZik6CiAJCQkJc2VsZi5qYXZhY190YXNrLmRlcF9ub2Rlcy5leHRlbmQo
dGcuamFyX3Rhc2sub3V0cHV0cykKIAkJCWVsc2U6CiAJCQkJaWYgaGFzYXR0cih0ZywgJ291
dGRpcicpOgotCQkJCQliYXNlX25vZGUgPSB0Zy5vdXRkaXIuYWJzcGF0aCgpCisJCQkJCWJh
c2Vfbm9kZSA9IHRnLm91dGRpcgogCQkJCWVsc2U6CiAJCQkJCWJhc2Vfbm9kZSA9IHRnLnBh
dGguZ2V0X2JsZCgpCiAKZGlmZiAtLWdpdCBhL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9v
bHMvbmFzbS5weSBiL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9vbHMvbmFzbS5weQppbmRl
eCA0MTFkNTgyNmI1ZC4uOWM1MWMxOGRlMTggMTAwNjQ0Ci0tLSBhL3RoaXJkX3BhcnR5L3dh
Zi93YWZsaWIvVG9vbHMvbmFzbS5weQorKysgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL1Rv
b2xzL25hc20ucHkKQEAgLTI0LDMgKzI0LDggQEAgZGVmIGNvbmZpZ3VyZShjb25mKToKIAlj
b25mLmVudi5BU0xOS19UR1RfRiA9IFsnLW8nXQogCWNvbmYubG9hZCgnYXNtJykKIAljb25m
LmVudi5BU01QQVRIX1NUID0gJy1JJXMnICsgb3Muc2VwCisJdHh0ID0gY29uZi5jbWRfYW5k
X2xvZyhjb25mLmVudi5BUyArIFsnLS12ZXJzaW9uJ10pCisJaWYgJ3lhc20nIGluIHR4dC5s
b3dlcigpOgorCQljb25mLmVudi5BU01fTkFNRSA9ICd5YXNtJworCWVsc2U6CisJCWNvbmYu
ZW52LkFTTV9OQU1FID0gJ25hc20nCmRpZmYgLS1naXQgYS90aGlyZF9wYXJ0eS93YWYvd2Fm
bGliL1Rvb2xzL3B5dGhvbi5weSBiL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvVG9vbHMvcHl0
aG9uLnB5CmluZGV4IDYzYTg5MTdkN2MxLi43YzQ1YTc2ZmZkMiAxMDA2NDQKLS0tIGEvdGhp
cmRfcGFydHkvd2FmL3dhZmxpYi9Ub29scy9weXRob24ucHkKKysrIGIvdGhpcmRfcGFydHkv
d2FmL3dhZmxpYi9Ub29scy9weXRob24ucHkKQEAgLTc5LDE0ICs3OSwxOSBAQCBkZWYgcHJv
Y2Vzc19weShzZWxmLCBub2RlKToKIAkiIiIKIAlBZGQgc2lnbmF0dXJlIG9mIC5weSBmaWxl
LCBzbyBpdCB3aWxsIGJlIGJ5dGUtY29tcGlsZWQgd2hlbiBuZWNlc3NhcnkKIAkiIiIKLQlh
c3NlcnQoaGFzYXR0cihzZWxmLCAnaW5zdGFsbF9wYXRoJykpLCAnYWRkIGZlYXR1cmVzPSJw
eSInCisJYXNzZXJ0KGhhc2F0dHIoc2VsZiwgJ2luc3RhbGxfcGF0aCcpKSwgJ2FkZCBmZWF0
dXJlcz0icHkiIGZvciB0YXJnZXQgIiVzIiBpbiAiJXMvd3NjcmlwdCIuJyAlIChzZWxmLnRh
cmdldCwgc2VsZi5wYXRoLm5pY2VfcGF0aCgpKQorCXNlbGYuaW5zdGFsbF9mcm9tID0gZ2V0
YXR0cihzZWxmLCAnaW5zdGFsbF9mcm9tJywgTm9uZSkKKwlyZWxhdGl2ZV90cmljayA9IGdl
dGF0dHIoc2VsZiwgJ3JlbGF0aXZlX3RyaWNrJywgVHJ1ZSkKKwlpZiBzZWxmLmluc3RhbGxf
ZnJvbToKKwkJYXNzZXJ0IGlzaW5zdGFuY2Uoc2VsZi5pbnN0YWxsX2Zyb20sIE5vZGUuTm9k
ZSksIFwKKwkJJ2FkZCBmZWF0dXJlcz0icHkiIGZvciB0YXJnZXQgIiVzIiBpbiAiJXMvd3Nj
cmlwdCIgKCVzKS4nICUgKHNlbGYudGFyZ2V0LCBzZWxmLnBhdGgubmljZV9wYXRoKCksIHR5
cGUoc2VsZi5pbnN0YWxsX2Zyb20pKQogCiAJIyB3aGVyZSB0byBpbnN0YWxsIHRoZSBweXRo
b24gZmlsZQogCWlmIHNlbGYuaW5zdGFsbF9wYXRoOgogCQlpZiBzZWxmLmluc3RhbGxfZnJv
bToKLQkJCXNlbGYuYWRkX2luc3RhbGxfZmlsZXMoaW5zdGFsbF90bz1zZWxmLmluc3RhbGxf
cGF0aCwgaW5zdGFsbF9mcm9tPW5vZGUsIGN3ZD1zZWxmLmluc3RhbGxfZnJvbSwgcmVsYXRp
dmVfdHJpY2s9VHJ1ZSkKKwkJCXNlbGYuYWRkX2luc3RhbGxfZmlsZXMoaW5zdGFsbF90bz1z
ZWxmLmluc3RhbGxfcGF0aCwgaW5zdGFsbF9mcm9tPW5vZGUsIGN3ZD1zZWxmLmluc3RhbGxf
ZnJvbSwgcmVsYXRpdmVfdHJpY2s9cmVsYXRpdmVfdHJpY2spCiAJCWVsc2U6Ci0JCQlzZWxm
LmFkZF9pbnN0YWxsX2ZpbGVzKGluc3RhbGxfdG89c2VsZi5pbnN0YWxsX3BhdGgsIGluc3Rh
bGxfZnJvbT1ub2RlLCByZWxhdGl2ZV90cmljaz1UcnVlKQorCQkJc2VsZi5hZGRfaW5zdGFs
bF9maWxlcyhpbnN0YWxsX3RvPXNlbGYuaW5zdGFsbF9wYXRoLCBpbnN0YWxsX2Zyb209bm9k
ZSwgcmVsYXRpdmVfdHJpY2s9cmVsYXRpdmVfdHJpY2spCiAKIAlsc3QgPSBbXQogCWlmIHNl
bGYuZW52LlBZQzoKQEAgLTk2LDkgKzEwMSwxMSBAQCBkZWYgcHJvY2Vzc19weShzZWxmLCBu
b2RlKToKIAogCWlmIHNlbGYuaW5zdGFsbF9wYXRoOgogCQlpZiBzZWxmLmluc3RhbGxfZnJv
bToKLQkJCXB5ZCA9IFV0aWxzLnN1YnN0X3ZhcnMoIiVzLyVzIiAlIChzZWxmLmluc3RhbGxf
cGF0aCwgbm9kZS5wYXRoX2Zyb20oc2VsZi5pbnN0YWxsX2Zyb20pKSwgc2VsZi5lbnYpCisJ
CQl0YXJnZXRfZGlyID0gbm9kZS5wYXRoX2Zyb20oc2VsZi5pbnN0YWxsX2Zyb20pIGlmIHJl
bGF0aXZlX3RyaWNrIGVsc2Ugbm9kZS5uYW1lCisJCQlweWQgPSBVdGlscy5zdWJzdF92YXJz
KCIlcy8lcyIgJSAoc2VsZi5pbnN0YWxsX3BhdGgsIHRhcmdldF9kaXIpLCBzZWxmLmVudikK
IAkJZWxzZToKLQkJCXB5ZCA9IFV0aWxzLnN1YnN0X3ZhcnMoIiVzLyVzIiAlIChzZWxmLmlu
c3RhbGxfcGF0aCwgbm9kZS5wYXRoX2Zyb20oc2VsZi5wYXRoKSksIHNlbGYuZW52KQorCQkJ
dGFyZ2V0X2RpciA9IG5vZGUucGF0aF9mcm9tKHNlbGYucGF0aCkgaWYgcmVsYXRpdmVfdHJp
Y2sgZWxzZSBub2RlLm5hbWUKKwkJCXB5ZCA9IFV0aWxzLnN1YnN0X3ZhcnMoIiVzLyVzIiAl
IChzZWxmLmluc3RhbGxfcGF0aCwgdGFyZ2V0X2RpciksIHNlbGYuZW52KQogCWVsc2U6CiAJ
CXB5ZCA9IG5vZGUuYWJzcGF0aCgpCiAKQEAgLTExNSw3ICsxMjIsNyBAQCBkZWYgcHJvY2Vz
c19weShzZWxmLCBub2RlKToKIAkJdHNrLnB5ZCA9IHB5ZAogCiAJCWlmIHNlbGYuaW5zdGFs
bF9wYXRoOgotCQkJc2VsZi5hZGRfaW5zdGFsbF9maWxlcyhpbnN0YWxsX3RvPW9zLnBhdGgu
ZGlybmFtZShweWQpLCBpbnN0YWxsX2Zyb209cHlvYmosIGN3ZD1ub2RlLnBhcmVudC5nZXRf
YmxkKCksIHJlbGF0aXZlX3RyaWNrPVRydWUpCisJCQlzZWxmLmFkZF9pbnN0YWxsX2ZpbGVz
KGluc3RhbGxfdG89b3MucGF0aC5kaXJuYW1lKHB5ZCksIGluc3RhbGxfZnJvbT1weW9iaiwg
Y3dkPW5vZGUucGFyZW50LmdldF9ibGQoKSwgcmVsYXRpdmVfdHJpY2s9cmVsYXRpdmVfdHJp
Y2spCiAKIGNsYXNzIHB5YyhUYXNrLlRhc2spOgogCSIiIgpAQCAtNDMzLDExICs0NDAsMTEg
QEAgZGVmIGNoZWNrX3B5dGhvbl9oZWFkZXJzKGNvbmYsIGZlYXR1cmVzPSdweWVtYmVkIHB5
ZXh0Jyk6CiAKIAkjIENvZGUgdXNpbmcgdGhlIFB5dGhvbiBBUEkgbmVlZHMgdG8gYmUgY29t
cGlsZWQgd2l0aCAtZm5vLXN0cmljdC1hbGlhc2luZwogCWlmIGVudi5DQ19OQU1FID09ICdn
Y2MnOgotCQllbnYuYXBwZW5kX3ZhbHVlKCdDRkxBR1NfUFlFTUJFRCcsIFsnLWZuby1zdHJp
Y3QtYWxpYXNpbmcnXSkKLQkJZW52LmFwcGVuZF92YWx1ZSgnQ0ZMQUdTX1BZRVhUJywgWyct
Zm5vLXN0cmljdC1hbGlhc2luZyddKQorCQllbnYuYXBwZW5kX3VuaXF1ZSgnQ0ZMQUdTX1BZ
RU1CRUQnLCBbJy1mbm8tc3RyaWN0LWFsaWFzaW5nJ10pCisJCWVudi5hcHBlbmRfdW5pcXVl
KCdDRkxBR1NfUFlFWFQnLCBbJy1mbm8tc3RyaWN0LWFsaWFzaW5nJ10pCiAJaWYgZW52LkNY
WF9OQU1FID09ICdnY2MnOgotCQllbnYuYXBwZW5kX3ZhbHVlKCdDWFhGTEFHU19QWUVNQkVE
JywgWyctZm5vLXN0cmljdC1hbGlhc2luZyddKQotCQllbnYuYXBwZW5kX3ZhbHVlKCdDWFhG
TEFHU19QWUVYVCcsIFsnLWZuby1zdHJpY3QtYWxpYXNpbmcnXSkKKwkJZW52LmFwcGVuZF91
bmlxdWUoJ0NYWEZMQUdTX1BZRU1CRUQnLCBbJy1mbm8tc3RyaWN0LWFsaWFzaW5nJ10pCisJ
CWVudi5hcHBlbmRfdW5pcXVlKCdDWFhGTEFHU19QWUVYVCcsIFsnLWZuby1zdHJpY3QtYWxp
YXNpbmcnXSkKIAogCWlmIGVudi5DQ19OQU1FID09ICJtc3ZjIjoKIAkJZnJvbSBkaXN0dXRp
bHMubXN2Y2NvbXBpbGVyIGltcG9ydCBNU1ZDQ29tcGlsZXIKZGlmZiAtLWdpdCBhL3RoaXJk
X3BhcnR5L3dhZi93YWZsaWIvZXh0cmFzL2RveHlnZW4ucHkgYi90aGlyZF9wYXJ0eS93YWYv
d2FmbGliL2V4dHJhcy9kb3h5Z2VuLnB5CmluZGV4IDQyM2Q4NDU1MDI1Li4yMGNkOWUxYTg1
MiAxMDA2NDQKLS0tIGEvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9leHRyYXMvZG94eWdlbi5w
eQorKysgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9kb3h5Z2VuLnB5CkBAIC04
NSw2ICs4NSwxMiBAQCBjbGFzcyBkb3h5Z2VuKFRhc2suVGFzayk6CiAJCWlmIG5vdCBnZXRh
dHRyKHNlbGYsICdwYXJzJywgTm9uZSk6CiAJCQl0eHQgPSBzZWxmLmlucHV0c1swXS5yZWFk
KCkKIAkJCXNlbGYucGFycyA9IHBhcnNlX2RveHkodHh0KQorCisJCQkjIE92ZXJyaWRlIHdp
dGggYW55IHBhcmFtZXRlcnMgcGFzc2VkIHRvIHRoZSB0YXNrIGdlbmVyYXRvcgorCQkJaWYg
Z2V0YXR0cihzZWxmLmdlbmVyYXRvciwgJ3BhcnMnLCBOb25lKToKKwkJCQlmb3IgaywgdiBp
biBzZWxmLmdlbmVyYXRvci5wYXJzLml0ZW1zKCk6CisJCQkJCXNlbGYucGFyc1trXSA9IHYK
KwogCQkJaWYgc2VsZi5wYXJzLmdldCgnT1VUUFVUX0RJUkVDVE9SWScpOgogCQkJCSMgVXNl
IHRoZSBwYXRoIHBhcnNlZCBmcm9tIHRoZSBEb3h5ZmlsZSBhcyBhbiBhYnNvbHV0ZSBwYXRo
CiAJCQkJb3V0cHV0X25vZGUgPSBzZWxmLmlucHV0c1swXS5wYXJlbnQuZ2V0X2JsZCgpLm1h
a2Vfbm9kZShzZWxmLnBhcnNbJ09VVFBVVF9ESVJFQ1RPUlknXSkKQEAgLTk0LDExICsxMDAs
NiBAQCBjbGFzcyBkb3h5Z2VuKFRhc2suVGFzayk6CiAJCQlvdXRwdXRfbm9kZS5ta2Rpcigp
CiAJCQlzZWxmLnBhcnNbJ09VVFBVVF9ESVJFQ1RPUlknXSA9IG91dHB1dF9ub2RlLmFic3Bh
dGgoKQogCi0JCQkjIE92ZXJyaWRlIHdpdGggYW55IHBhcmFtZXRlcnMgcGFzc2VkIHRvIHRo
ZSB0YXNrIGdlbmVyYXRvcgotCQkJaWYgZ2V0YXR0cihzZWxmLmdlbmVyYXRvciwgJ3BhcnMn
LCBOb25lKToKLQkJCQlmb3IgaywgdiBpbiBzZWxmLmdlbmVyYXRvci5wYXJzLml0ZW1zKCk6
Ci0JCQkJCXNlbGYucGFyc1trXSA9IHYKLQogCQkJc2VsZi5kb3h5X2lucHV0cyA9IGdldGF0
dHIoc2VsZiwgJ2RveHlfaW5wdXRzJywgW10pCiAJCQlpZiBub3Qgc2VsZi5wYXJzLmdldCgn
SU5QVVQnKToKIAkJCQlzZWxmLmRveHlfaW5wdXRzLmFwcGVuZChzZWxmLmlucHV0c1swXS5w
YXJlbnQpCmRpZmYgLS1naXQgYS90aGlyZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9mYXN0
X3BhcnRpYWwucHkgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9mYXN0X3BhcnRp
YWwucHkKaW5kZXggNzFiODMxOGVlY2IuLjkwYTk0NzIzYmI4IDEwMDY0NAotLS0gYS90aGly
ZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9mYXN0X3BhcnRpYWwucHkKKysrIGIvdGhpcmRf
cGFydHkvd2FmL3dhZmxpYi9leHRyYXMvZmFzdF9wYXJ0aWFsLnB5CkBAIC0xOCw2ICsxOCw3
IEBAIFVzYWdlOjoKIAkJb3B0LmxvYWQoJ2Zhc3RfcGFydGlhbCcpCiAKIEFzc3VtcHRpb25z
OgorKiBTdGFydCB3aXRoIGEgY2xlYW4gYnVpbGQgKHJ1biAid2FmIGRpc3RjbGVhbiIgYWZ0
ZXIgZW5hYmxpbmcpCiAqIE1vc3RseSBmb3IgQy9DKysvRm9ydHJhbiB0YXJnZXRzIHdpdGgg
bGluayB0YXNrcyAob2JqZWN0LW9ubHkgdGFyZ2V0cyBhcmUgbm90IGhhbmRsZWQpCiAgIHRy
eSBpdCBpbiB0aGUgZm9sZGVyIGdlbmVyYXRlZCBieSB1dGlscy9nZW5iZW5jaC5weQogKiBG
b3IgZnVsbCBwcm9qZWN0IGJ1aWxkczogbm8gLS10YXJnZXRzIGFuZCBubyBwcnVuaW5nIGZy
b20gc3ViZm9sZGVycwpAQCAtMTMxLDEyICsxMzIsMTggQEAgY2xhc3MgYmxkX3Byb3h5KG9i
amVjdCk6CiAJCQlkYXRhW3hdID0gZ2V0YXR0cihzZWxmLCB4KQogCQlkYiA9IG9zLnBhdGgu
am9pbihzZWxmLnZhcmlhbnRfZGlyLCBDb250ZXh0LkRCRklMRSArIHNlbGYuc3RvcmVfa2V5
KQogCi0JCXRyeToKLQkJCXdhZmxpYi5Ob2RlLnBpY2tsZV9sb2NrLmFjcXVpcmUoKQorCQl3
aXRoIHdhZmxpYi5Ob2RlLnBpY2tsZV9sb2NrOgogCQkJd2FmbGliLk5vZGUuTm9kMyA9IHNl
bGYubm9kZV9jbGFzcwotCQkJeCA9IEJ1aWxkLmNQaWNrbGUuZHVtcHMoZGF0YSwgQnVpbGQu
UFJPVE9DT0wpCi0JCWZpbmFsbHk6Ci0JCQl3YWZsaWIuTm9kZS5waWNrbGVfbG9jay5yZWxl
YXNlKCkKKwkJCXRyeToKKwkJCQl4ID0gQnVpbGQuY1BpY2tsZS5kdW1wcyhkYXRhLCBCdWls
ZC5QUk9UT0NPTCkKKwkJCWV4Y2VwdCBCdWlsZC5jUGlja2xlLlBpY2tsaW5nRXJyb3I6CisJ
CQkJcm9vdCA9IGRhdGFbJ3Jvb3QnXQorCQkJCWZvciBub2RlX2RlcHMgaW4gZGF0YVsnbm9k
ZV9kZXBzJ10udmFsdWVzKCk6CisJCQkJCWZvciBpZHgsIG5vZGUgaW4gZW51bWVyYXRlKG5v
ZGVfZGVwcyk6CisJCQkJCQkjIHRoZXJlIG1heSBiZSBtb3JlIGNyb3NzLWNvbnRleHQgTm9k
ZSBvYmplY3RzIHRvIGZpeCwKKwkJCQkJCSMgYnV0IHRoaXMgc2hvdWxkIGJlIHRoZSBtYWlu
IHNvdXJjZQorCQkJCQkJbm9kZV9kZXBzW2lkeF0gPSByb290LmZpbmRfbm9kZShub2RlLmFi
c3BhdGgoKSkKKwkJCQl4ID0gQnVpbGQuY1BpY2tsZS5kdW1wcyhkYXRhLCBCdWlsZC5QUk9U
T0NPTCkKIAogCQlMb2dzLmRlYnVnKCdyZXZfdXNlOiBzdG9yaW5nICVzJywgZGIpCiAJCVV0
aWxzLndyaXRlZihkYiArICcudG1wJywgeCwgbT0nd2InKQpAQCAtMzkzLDEyICs0MDAsMTcg
QEAgZGVmIGlzX3N0YWxlKHNlbGYpOgogCQlMb2dzLmRlYnVnKCdyZXZfdXNlOiBtdXN0IHBv
c3QgJXIgYmVjYXVzZSB0aGlzIGlzIGEgY2xlYW4gYnVpbGQnKQogCQlyZXR1cm4gVHJ1ZQog
Ci0JIyAzLiBjaGVjayBpZiB0aGUgY29uZmlndXJhdGlvbiBjaGFuZ2VkCi0JaWYgb3Muc3Rh
dChzZWxmLmJsZC5ibGRub2RlLmZpbmRfbm9kZSgnYzRjaGUvYnVpbGQuY29uZmlnLnB5Jyku
YWJzcGF0aCgpKS5zdF9tdGltZSA+IGRic3RhdDoKKwkjIDMuYSBjaGVjayBpZiB0aGUgY29u
ZmlndXJhdGlvbiBleGlzdHMKKwljYWNoZV9ub2RlID0gc2VsZi5ibGQuYmxkbm9kZS5maW5k
X25vZGUoJ2M0Y2hlL2J1aWxkLmNvbmZpZy5weScpCisJaWYgbm90IGNhY2hlX25vZGU6CisJ
CXJldHVybiBUcnVlCisKKwkjIDMuYiBjaGVjayBpZiB0aGUgY29uZmlndXJhdGlvbiBjaGFu
Z2VkCisJaWYgb3Muc3RhdChjYWNoZV9ub2RlLmFic3BhdGgoKSkuc3RfbXRpbWUgPiBkYnN0
YXQ6CiAJCUxvZ3MuZGVidWcoJ3Jldl91c2U6IG11c3QgcG9zdCAlciBiZWNhdXNlIHRoZSBj
b25maWd1cmF0aW9uIGhhcyBjaGFuZ2VkJywgc2VsZi5uYW1lKQogCQlyZXR1cm4gVHJ1ZQog
Ci0JIyAzLmEgYW55IHRzdGFtcCBkYXRhPworCSMgMy5jIGFueSB0c3RhbXAgZGF0YT8KIAl0
cnk6CiAJCWZfZGVwcyA9IHNlbGYuYmxkLmZfZGVwcwogCWV4Y2VwdCBBdHRyaWJ1dGVFcnJv
cjoKZGlmZiAtLWdpdCBhL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvZXh0cmFzL2dlbnB5Ymlu
ZC5weSBiL3RoaXJkX3BhcnR5L3dhZi93YWZsaWIvZXh0cmFzL2dlbnB5YmluZC5weQpuZXcg
ZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMC4uYWMyMDZlZThhOGIKLS0tIC9k
ZXYvbnVsbAorKysgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9nZW5weWJpbmQu
cHkKQEAgLTAsMCArMSwxOTQgQEAKK2ltcG9ydCBvcworaW1wb3J0IHBpcGVzCitpbXBvcnQg
c3VicHJvY2VzcworaW1wb3J0IHN5cworCitmcm9tIHdhZmxpYiBpbXBvcnQgTG9ncywgVGFz
aywgQ29udGV4dAorZnJvbSB3YWZsaWIuVG9vbHMuY19wcmVwcm9jIGltcG9ydCBzY2FuIGFz
IHNjYW5faW1wbAorIyBeLS0gTm90ZTogd2FmbGliLmV4dHJhcy5nY2NkZXBzLnNjYW4gZG9l
cyBub3Qgd29yayBmb3IgdXMsCisjIGR1ZSB0byBpdHMgY3VycmVudCBpbXBsZW1lbnRhdGlv
bjoKKyMgVGhlIC1NRCBmbGFnIGlzIGluamVjdGVkIGludG8gdGhlIHtDLENYWH1GTEFHUyBl
bnZpcm9ubWVudCB2YXJpYWJsZSBhbmQKKyMgZGVwZW5kZW5jaWVzIGFyZSByZWFkIG91dCBp
biBhIHNlcGFyYXRlIHN0ZXAgYWZ0ZXIgY29tcGlsaW5nIGJ5IHJlYWRpbmcKKyMgdGhlIC5k
IGZpbGUgc2F2ZWQgYWxvbmdzaWRlIHRoZSBvYmplY3QgZmlsZS4KKyMgQXMgdGhlIGdlbnB5
YmluZCB0YXNrIHJlZmVycyB0byBhIGhlYWRlciBmaWxlIHRoYXQgaXMgbmV2ZXIgY29tcGls
ZWQgaXRzZWxmLAorIyBnY2NkZXBzIHdpbGwgbm90IGJlIGFibGUgdG8gZXh0cmFjdCB0aGUg
bGlzdCBvZiBkZXBlbmRlbmNpZXMuCisKK2Zyb20gd2FmbGliLlRhc2tHZW4gaW1wb3J0IGZl
YXR1cmUsIGJlZm9yZV9tZXRob2QKKworCitkZWYgam9pbl9hcmdzKGFyZ3MpOgorICAgIHJl
dHVybiAiICIuam9pbihwaXBlcy5xdW90ZShhcmcpIGZvciBhcmcgaW4gYXJncykKKworCitk
ZWYgY29uZmlndXJlKGNmZyk6CisgICAgY2ZnLmxvYWQoImNvbXBpbGVyX2N4eCIpCisgICAg
Y2ZnLmxvYWQoInB5dGhvbiIpCisgICAgY2ZnLmNoZWNrX3B5dGhvbl92ZXJzaW9uKG1pbnZl
cj0oMiwgNykpCisgICAgaWYgbm90IGNmZy5lbnYuTExWTV9DT05GSUc6CisgICAgICAgIGNm
Zy5maW5kX3Byb2dyYW0oImxsdm0tY29uZmlnIiwgdmFyPSJMTFZNX0NPTkZJRyIpCisgICAg
aWYgbm90IGNmZy5lbnYuR0VOUFlCSU5EOgorICAgICAgICBjZmcuZmluZF9wcm9ncmFtKCJn
ZW5weWJpbmQiLCB2YXI9IkdFTlBZQklORCIpCisKKyAgICAjIGZpbmQgY2xhbmcgcmVhc291
cmNlIGRpciBmb3IgYnVpbHRpbiBoZWFkZXJzCisgICAgY2ZnLmVudi5HRU5QWUJJTkRfUkVT
T1VSQ0VfRElSID0gb3MucGF0aC5qb2luKAorICAgICAgICAgICAgY2ZnLmNtZF9hbmRfbG9n
KGNmZy5lbnYuTExWTV9DT05GSUcgKyBbIi0tbGliZGlyIl0pLnN0cmlwKCksCisgICAgICAg
ICAgICAiY2xhbmciLAorICAgICAgICAgICAgY2ZnLmNtZF9hbmRfbG9nKGNmZy5lbnYuTExW
TV9DT05GSUcgKyBbIi0tdmVyc2lvbiJdKS5zdHJpcCgpKQorICAgIGlmIG9zLnBhdGguZXhp
c3RzKGNmZy5lbnYuR0VOUFlCSU5EX1JFU09VUkNFX0RJUik6CisgICAgICAgIGNmZy5tc2co
IkNoZWNraW5nIGNsYW5nIHJlc291cmNlIGRpciIsIGNmZy5lbnYuR0VOUFlCSU5EX1JFU09V
UkNFX0RJUikKKyAgICBlbHNlOgorICAgICAgICBjZmcuZmF0YWwoIkNsYW5nIHJlc291cmNl
IGRpciBub3QgZm91bmQiKQorCisKK0BmZWF0dXJlKCJnZW5weWJpbmQiKQorQGJlZm9yZV9t
ZXRob2QoInByb2Nlc3Nfc291cmNlIikKK2RlZiBnZW5lcmF0ZV9nZW5weWJpbmRfc291cmNl
KHNlbGYpOgorICAgICIiIgorICAgIFJ1biBnZW5weWJpbmQgb24gdGhlIGhlYWRlcnMgcHJv
dmlkZWQgaW4gYHNvdXJjZWAgYW5kIGNvbXBpbGUvbGluayB0aGUKKyAgICBnZW5lcmF0ZWQg
Y29kZSBpbnN0ZWFkLiAgVGhpcyB3b3JrcyBieSBnZW5lcmF0aW5nIHRoZSBjb2RlIG9uIHRo
ZSBmbHkgYW5kCisgICAgc3dhcHBpbmcgdGhlIHNvdXJjZSBub2RlIGJlZm9yZSBgcHJvY2Vz
c19zb3VyY2VgIGlzIHJ1bi4KKyAgICAiIiIKKyAgICAjIG5hbWUgb2YgbW9kdWxlIGRlZmF1
bHRzIHRvIG5hbWUgb2YgdGFyZ2V0CisgICAgbW9kdWxlID0gZ2V0YXR0cihzZWxmLCAibW9k
dWxlIiwgc2VsZi50YXJnZXQpCisKKyAgICAjIGNyZWF0ZSB0ZW1wb3Jhcnkgc291cmNlIGZp
bGUgaW4gYnVpbGQgZGlyZWN0b3J5IHRvIGhvbGQgZ2VuZXJhdGVkIGNvZGUKKyAgICBvdXQg
PSAiZ2VucHliaW5kLSVzLiVkLmNwcCIgJSAobW9kdWxlLCBzZWxmLmlkeCkKKyAgICBvdXQg
PSBzZWxmLnBhdGguZ2V0X2JsZCgpLmZpbmRfb3JfZGVjbGFyZShvdXQpCisKKyAgICB0YXNr
ID0gc2VsZi5jcmVhdGVfdGFzaygiZ2VucHliaW5kIiwgc2VsZi50b19ub2RlcyhzZWxmLnNv
dXJjZSksIG91dCkKKyAgICAjIHVzZWQgdG8gZGV0ZWN0IHdoZXRoZXIgQ0ZMQUdTIG9yIENY
WEZMQUdTIHNob3VsZCBiZSBwYXNzZWQgdG8gZ2VucHliaW5kCisgICAgdGFzay5mZWF0dXJl
cyA9IHNlbGYuZmVhdHVyZXMKKyAgICB0YXNrLm1vZHVsZSA9IG1vZHVsZQorICAgICMgY2Fu
IGJlIHVzZWQgdG8gc2VsZWN0IGRlZmluaXRpb25zIHRvIGluY2x1ZGUgaW4gdGhlIGN1cnJl
bnQgbW9kdWxlCisgICAgIyAod2hlbiBoZWFkZXIgZmlsZXMgYXJlIHNoYXJlZCBieSBtb3Jl
IHRoYW4gb25lIG1vZHVsZSkKKyAgICB0YXNrLmdlbnB5YmluZF90YWdzID0gc2VsZi50b19s
aXN0KGdldGF0dHIoc2VsZiwgImdlbnB5YmluZF90YWdzIiwgW10pKQorICAgICMgYWRkaXRp
b25hbCBpbmNsdWRlIGRpcmVjdG9yaWVzCisgICAgdGFzay5pbmNsdWRlcyA9IHNlbGYudG9f
bGlzdChnZXRhdHRyKHNlbGYsICJpbmNsdWRlcyIsIFtdKSkKKyAgICB0YXNrLmdlbnB5Ymlu
ZCA9IHNlbGYuZW52LkdFTlBZQklORAorCisgICAgIyBUZWxsIHdhZiB0byBjb21waWxlL2xp
bmsgdGhlIGdlbmVyYXRlZCBjb2RlIGluc3RlYWQgb2YgdGhlIGhlYWRlcnMKKyAgICAjIG9y
aWdpbmFsbHkgcGFzc2VkLWluIHZpYSB0aGUgYHNvdXJjZWAgcGFyYW1ldGVyLiAoc2VlIGBw
cm9jZXNzX3NvdXJjZWApCisgICAgc2VsZi5zb3VyY2UgPSBbb3V0XQorCisKK2NsYXNzIGdl
bnB5YmluZChUYXNrLlRhc2spOiAjIHB5bGludDogZGlzYWJsZT1pbnZhbGlkLW5hbWUKKyAg
ICAiIiIKKyAgICBSdW5zIGdlbnB5YmluZCBvbiBoZWFkZXJzIHByb3ZpZGVkIGFzIGlucHV0
IHRvIHRoaXMgdGFzay4KKyAgICBHZW5lcmF0ZWQgY29kZSB3aWxsIGJlIHdyaXR0ZW4gdG8g
dGhlIGZpcnN0IChhbmQgb25seSkgb3V0cHV0IG5vZGUuCisgICAgIiIiCisgICAgcXVpZXQg
PSBUcnVlCisgICAgY29sb3IgPSAiUElOSyIKKyAgICBzY2FuID0gc2Nhbl9pbXBsCisKKyAg
ICBAc3RhdGljbWV0aG9kCisgICAgZGVmIGtleXdvcmQoKToKKyAgICAgICAgcmV0dXJuICJB
bmFseXppbmciCisKKyAgICBkZWYgcnVuKHNlbGYpOgorICAgICAgICBpZiBub3Qgc2VsZi5p
bnB1dHM6CisgICAgICAgICAgICByZXR1cm4KKworICAgICAgICBhcmdzID0gc2VsZi5maW5k
X2dlbnB5YmluZCgpICsgc2VsZi5fYXJndW1lbnRzKAorICAgICAgICAgICAgICAgIHJlc291
cmNlX2Rpcj1zZWxmLmVudi5HRU5QWUJJTkRfUkVTT1VSQ0VfRElSKQorCisgICAgICAgIG91
dHB1dCA9IHNlbGYucnVuX2dlbnB5YmluZChhcmdzKQorCisgICAgICAgICMgRm9yIGRlYnVn
Z2luZyAvIGxvZyBvdXRwdXQKKyAgICAgICAgcGFzdGVhYmxlX2NvbW1hbmQgPSBqb2luX2Fy
Z3MoYXJncykKKworICAgICAgICAjIHdyaXRlIGdlbmVyYXRlZCBjb2RlIHRvIGZpbGUgaW4g
YnVpbGQgZGlyZWN0b3J5CisgICAgICAgICMgKHdpbGwgYmUgY29tcGlsZWQgZHVyaW5nIHBy
b2Nlc3Nfc291cmNlIHN0YWdlKQorICAgICAgICAob3V0cHV0X25vZGUsKSA9IHNlbGYub3V0
cHV0cworICAgICAgICBvdXRwdXRfbm9kZS53cml0ZSgiLy8ge31cbnt9XG4iLmZvcm1hdCgK
KyAgICAgICAgICAgIHBhc3RlYWJsZV9jb21tYW5kLnJlcGxhY2UoIlxuIiwgIlxuLy8gIiks
IG91dHB1dCkpCisKKyAgICBkZWYgZmluZF9nZW5weWJpbmQoc2VsZik6CisgICAgICAgIHJl
dHVybiBzZWxmLmdlbnB5YmluZAorCisgICAgZGVmIHJ1bl9nZW5weWJpbmQoc2VsZiwgYXJn
cyk6CisgICAgICAgIGJsZCA9IHNlbGYuZ2VuZXJhdG9yLmJsZAorCisgICAgICAgIGt3YXJn
cyA9IGRpY3QoY3dkPWJsZC52YXJpYW50X2RpcikKKyAgICAgICAgaWYgaGFzYXR0cihibGQs
ICJsb2dfY29tbWFuZCIpOgorICAgICAgICAgICAgYmxkLmxvZ19jb21tYW5kKGFyZ3MsIGt3
YXJncykKKyAgICAgICAgZWxzZToKKyAgICAgICAgICAgIExvZ3MuZGVidWcoInJ1bm5lcjog
eyFyfSIuZm9ybWF0KGFyZ3MpKQorICAgICAgICBwcm9jID0gc3VicHJvY2Vzcy5Qb3BlbigK
KyAgICAgICAgICAgIGFyZ3MsIHN0ZG91dD1zdWJwcm9jZXNzLlBJUEUsIHN0ZGVycj1zdWJw
cm9jZXNzLlBJUEUsICoqa3dhcmdzKQorICAgICAgICBzdGRvdXQsIHN0ZGVyciA9IHByb2Mu
Y29tbXVuaWNhdGUoKQorCisgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHN0ZG91dCwgc3Ry
KToKKyAgICAgICAgICAgIHN0ZG91dCA9IHN0ZG91dC5kZWNvZGUoc3lzLnN0ZG91dC5lbmNv
ZGluZywgZXJyb3JzPSJyZXBsYWNlIikKKyAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc3Rk
ZXJyLCBzdHIpOgorICAgICAgICAgICAgc3RkZXJyID0gc3RkZXJyLmRlY29kZShzeXMuc3Rk
ZXJyLmVuY29kaW5nLCBlcnJvcnM9InJlcGxhY2UiKQorCisgICAgICAgIGlmIHByb2MucmV0
dXJuY29kZSAhPSAwOgorICAgICAgICAgICAgYmxkLmZhdGFsKAorICAgICAgICAgICAgICAg
ICJnZW5weWJpbmQgcmV0dXJuZWQge2NvZGV9IGR1cmluZyB0aGUgZm9sbG93aW5nIGNhbGw6
IgorICAgICAgICAgICAgICAgICJcbntjb21tYW5kfVxuXG57c3Rkb3V0fVxuXG57c3RkZXJy
fSIuZm9ybWF0KAorICAgICAgICAgICAgICAgICAgICBjb2RlPXByb2MucmV0dXJuY29kZSwK
KyAgICAgICAgICAgICAgICAgICAgY29tbWFuZD1qb2luX2FyZ3MoYXJncyksCisgICAgICAg
ICAgICAgICAgICAgIHN0ZG91dD1zdGRvdXQsCisgICAgICAgICAgICAgICAgICAgIHN0ZGVy
cj1zdGRlcnIsCisgICAgICAgICAgICAgICAgKSkKKworICAgICAgICBpZiBzdGRlcnIuc3Ry
aXAoKToKKyAgICAgICAgICAgIExvZ3MuZGVidWcoIm5vbi1mYXRhbCB3YXJuaW5ncyBkdXJp
bmcgZ2VucHliaW5kIHJ1bjpcbnt9Ii5mb3JtYXQoc3RkZXJyKSkKKworICAgICAgICByZXR1
cm4gc3Rkb3V0CisKKyAgICBkZWYgX2luY2x1ZGVfcGF0aHMoc2VsZik6CisgICAgICAgIHJl
dHVybiBzZWxmLmdlbmVyYXRvci50b19pbmNub2RlcyhzZWxmLmluY2x1ZGVzICsgc2VsZi5l
bnYuSU5DTFVERVMpCisKKyAgICBkZWYgX2lucHV0c19hc19yZWxhdGl2ZV9pbmNsdWRlcyhz
ZWxmKToKKyAgICAgICAgaW5jbHVkZV9wYXRocyA9IHNlbGYuX2luY2x1ZGVfcGF0aHMoKQor
ICAgICAgICByZWxhdGl2ZV9pbmNsdWRlcyA9IFtdCisgICAgICAgIGZvciBub2RlIGluIHNl
bGYuaW5wdXRzOgorICAgICAgICAgICAgZm9yIGluYyBpbiBpbmNsdWRlX3BhdGhzOgorICAg
ICAgICAgICAgICAgIGlmIG5vZGUuaXNfY2hpbGRfb2YoaW5jKToKKyAgICAgICAgICAgICAg
ICAgICAgcmVsYXRpdmVfaW5jbHVkZXMuYXBwZW5kKG5vZGUucGF0aF9mcm9tKGluYykpCisg
ICAgICAgICAgICAgICAgICAgIGJyZWFrCisgICAgICAgICAgICBlbHNlOgorICAgICAgICAg
ICAgICAgIHNlbGYuZ2VuZXJhdG9yLmJsZC5mYXRhbCgiY291bGQgbm90IHJlc29sdmUge30i
LmZvcm1hdChub2RlKSkKKyAgICAgICAgcmV0dXJuIHJlbGF0aXZlX2luY2x1ZGVzCisKKyAg
ICBkZWYgX2FyZ3VtZW50cyhzZWxmLCBnZW5weWJpbmRfcGFyc2U9Tm9uZSwgcmVzb3VyY2Vf
ZGlyPU5vbmUpOgorICAgICAgICBhcmdzID0gW10KKyAgICAgICAgcmVsYXRpdmVfaW5jbHVk
ZXMgPSBzZWxmLl9pbnB1dHNfYXNfcmVsYXRpdmVfaW5jbHVkZXMoKQorICAgICAgICBpc19j
eHggPSAiY3h4IiBpbiBzZWxmLmZlYXR1cmVzCisKKyAgICAgICAgIyBvcHRpb25zIGZvciBn
ZW5weWJpbmQKKyAgICAgICAgYXJncy5leHRlbmQoWyItLWdlbnB5YmluZC1tb2R1bGUiLCBz
ZWxmLm1vZHVsZV0pCisgICAgICAgIGlmIHNlbGYuZ2VucHliaW5kX3RhZ3M6CisgICAgICAg
ICAgICBhcmdzLmV4dGVuZChbIi0tZ2VucHliaW5kLXRhZyJdICsgc2VsZi5nZW5weWJpbmRf
dGFncykKKyAgICAgICAgaWYgcmVsYXRpdmVfaW5jbHVkZXM6CisgICAgICAgICAgICBhcmdz
LmV4dGVuZChbIi0tZ2VucHliaW5kLWluY2x1ZGUiXSArIHJlbGF0aXZlX2luY2x1ZGVzKQor
ICAgICAgICBpZiBnZW5weWJpbmRfcGFyc2U6CisgICAgICAgICAgICBhcmdzLmV4dGVuZChb
Ii0tZ2VucHliaW5kLXBhcnNlIiwgZ2VucHliaW5kX3BhcnNlXSkKKworICAgICAgICBhcmdz
LmFwcGVuZCgiLS0iKQorCisgICAgICAgICMgaGVhZGVycyB0byBiZSBwcm9jZXNzZWQgYnkg
Z2VucHliaW5kCisgICAgICAgIGFyZ3MuZXh0ZW5kKG5vZGUuYWJzcGF0aCgpIGZvciBub2Rl
IGluIHNlbGYuaW5wdXRzKQorCisgICAgICAgIGFyZ3MuYXBwZW5kKCItLSIpCisKKyAgICAg
ICAgIyBvcHRpb25zIGZvciBjbGFuZy9nZW5weWJpbmQtcGFyc2UKKyAgICAgICAgYXJncy5h
cHBlbmQoIi1EX19HRU5QWUJJTkRfXyIpCisgICAgICAgIGFyZ3MuYXBwZW5kKCIteGMrKyIg
aWYgaXNfY3h4IGVsc2UgIi14YyIpCisgICAgICAgIGhhc19zdGRfYXJndW1lbnQgPSBGYWxz
ZQorICAgICAgICBmb3IgZmxhZyBpbiBzZWxmLmVudlsiQ1hYRkxBR1MiIGlmIGlzX2N4eCBl
bHNlICJDRkxBR1MiXToKKyAgICAgICAgICAgIGZsYWcgPSBmbGFnLnJlcGxhY2UoIi1zdGQ9
Z251IiwgIi1zdGQ9YyIpCisgICAgICAgICAgICBpZiBmbGFnLnN0YXJ0c3dpdGgoIi1zdGQ9
YyIpOgorICAgICAgICAgICAgICAgIGhhc19zdGRfYXJndW1lbnQgPSBUcnVlCisgICAgICAg
ICAgICBhcmdzLmFwcGVuZChmbGFnKQorICAgICAgICBpZiBub3QgaGFzX3N0ZF9hcmd1bWVu
dDoKKyAgICAgICAgICAgIGFyZ3MuYXBwZW5kKCItc3RkPWMrKzE0IikKKyAgICAgICAgYXJn
cy5leHRlbmQoIi1Je30iLmZvcm1hdChuLmFic3BhdGgoKSkgZm9yIG4gaW4gc2VsZi5faW5j
bHVkZV9wYXRocygpKQorICAgICAgICBhcmdzLmV4dGVuZCgiLUR7fSIuZm9ybWF0KHApIGZv
ciBwIGluIHNlbGYuZW52LkRFRklORVMpCisKKyAgICAgICAgIyBwb2ludCB0byBjbGFuZyBy
ZXNvdXJjZSBkaXIsIGlmIHNwZWNpZmllZAorICAgICAgICBpZiByZXNvdXJjZV9kaXI6Cisg
ICAgICAgICAgICBhcmdzLmFwcGVuZCgiLXJlc291cmNlLWRpcj17fSIuZm9ybWF0KHJlc291
cmNlX2RpcikpCisKKyAgICAgICAgcmV0dXJuIGFyZ3MKZGlmZiAtLWdpdCBhL3RoaXJkX3Bh
cnR5L3dhZi93YWZsaWIvZXh0cmFzL2xvY2FsX3JwYXRoLnB5IGIvdGhpcmRfcGFydHkvd2Fm
L3dhZmxpYi9leHRyYXMvbG9jYWxfcnBhdGgucHkKaW5kZXggYjI1MDdlMTdhMTAuLmUzOTIz
ZDliOWQ0IDEwMDY0NAotLS0gYS90aGlyZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9sb2Nh
bF9ycGF0aC5weQorKysgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9sb2NhbF9y
cGF0aC5weQpAQCAtMiwxOCArMiwyMCBAQAogIyBlbmNvZGluZzogdXRmLTgKICMgVGhvbWFz
IE5hZ3ksIDIwMTEgKGl0YSkKIAoraW1wb3J0IGNvcHkKIGZyb20gd2FmbGliLlRhc2tHZW4g
aW1wb3J0IGFmdGVyX21ldGhvZCwgZmVhdHVyZQogCiBAYWZ0ZXJfbWV0aG9kKCdwcm9wYWdh
dGVfdXNlbGliX3ZhcnMnKQogQGZlYXR1cmUoJ2Nwcm9ncmFtJywgJ2NzaGxpYicsICdjeHhw
cm9ncmFtJywgJ2N4eHNobGliJywgJ2ZjcHJvZ3JhbScsICdmY3NobGliJykKIGRlZiBhZGRf
cnBhdGhfc3R1ZmYoc2VsZik6Ci0JYWxsID0gc2VsZi50b19saXN0KGdldGF0dHIoc2VsZiwg
J3VzZScsIFtdKSkKKwlhbGwgPSBjb3B5LmNvcHkoc2VsZi50b19saXN0KGdldGF0dHIoc2Vs
ZiwgJ3VzZScsIFtdKSkpCiAJd2hpbGUgYWxsOgogCQluYW1lID0gYWxsLnBvcCgpCiAJCXRy
eToKIAkJCXRnID0gc2VsZi5ibGQuZ2V0X3RnZW5fYnlfbmFtZShuYW1lKQogCQlleGNlcHQ6
CiAJCQljb250aW51ZQotCQlzZWxmLmVudi5hcHBlbmRfdmFsdWUoJ1JQQVRIJywgdGcubGlu
a190YXNrLm91dHB1dHNbMF0ucGFyZW50LmFic3BhdGgoKSkKLQkJYWxsLmV4dGVuZChzZWxm
LnRvX2xpc3QoZ2V0YXR0cih0ZywgJ3VzZScsIFtdKSkpCisJCWlmIGhhc2F0dHIodGcsICds
aW5rX3Rhc2snKToKKwkJCXNlbGYuZW52LmFwcGVuZF92YWx1ZSgnUlBBVEgnLCB0Zy5saW5r
X3Rhc2sub3V0cHV0c1swXS5wYXJlbnQuYWJzcGF0aCgpKQorCQkJYWxsLmV4dGVuZChzZWxm
LnRvX2xpc3QoZ2V0YXR0cih0ZywgJ3VzZScsIFtdKSkpCiAKZGlmZiAtLWdpdCBhL3RoaXJk
X3BhcnR5L3dhZi93YWZsaWIvZXh0cmFzL29iamNvcHkucHkgYi90aGlyZF9wYXJ0eS93YWYv
d2FmbGliL2V4dHJhcy9vYmpjb3B5LnB5CmluZGV4IDgyZDgzNTllY2Y3Li5iYjdjYTZlZjIy
NCAxMDA2NDQKLS0tIGEvdGhpcmRfcGFydHkvd2FmL3dhZmxpYi9leHRyYXMvb2JqY29weS5w
eQorKysgYi90aGlyZF9wYXJ0eS93YWYvd2FmbGliL2V4dHJhcy9vYmpjb3B5LnB5CkBAIC0x
NSw3ICsxNSw3IEBAIG9iamNvcHlfZmxhZ3MJCSAgQWRkaXRpb25hbCBmbGFncyBwYXNzZWQg
dG8gb2JqY29weS4KICIiIgogCiBmcm9tIHdhZmxpYi5VdGlscyBpbXBvcnQgZGVmX2F0dHJz
Ci1mcm9tIHdhZmxpYiBpbXBvcnQgVGFzaworZnJvbSB3YWZsaWIgaW1wb3J0IFRhc2ssIE9w
dGlvbnMKIGZyb20gd2FmbGliLlRhc2tHZW4gaW1wb3J0IGZlYXR1cmUsIGFmdGVyX21ldGhv
ZAogCiBjbGFzcyBvYmpjb3B5KFRhc2suVGFzayk6CkBAIC00Niw1ICs0Niw4IEBAIGRlZiBt
YXBfb2JqY29weShzZWxmKToKIAkJc2VsZi5hZGRfaW5zdGFsbF9maWxlcyhpbnN0YWxsX3Rv
PXNlbGYub2JqY29weV9pbnN0YWxsX3BhdGgsIGluc3RhbGxfZnJvbT10YXNrLm91dHB1dHNb
MF0pCiAKIGRlZiBjb25maWd1cmUoY3R4KToKLQljdHguZmluZF9wcm9ncmFtKCdvYmpjb3B5
JywgdmFyPSdPQkpDT1BZJywgbWFuZGF0b3J5PVRydWUpCi0KKwlwcm9ncmFtX25hbWUgPSAn
b2JqY29weScKKwlwcmVmaXggPSBnZXRhdHRyKE9wdGlvbnMub3B0aW9ucywgJ2Nyb3NzX3By
ZWZpeCcsIE5vbmUpCisJaWYgcHJlZml4OgorCQlwcm9ncmFtX25hbWUgPSAne30te30nLmZv
cm1hdChwcmVmaXgsIHByb2dyYW1fbmFtZSkKKwljdHguZmluZF9wcm9ncmFtKHByb2dyYW1f
bmFtZSwgdmFyPSdPQkpDT1BZJywgbWFuZGF0b3J5PVRydWUpCi0tIAoyLjIxLjAKCgpGcm9t
IGE2MTdlZDEzNGNkNjgxZmFkN2YxMTYzMmJmMjE0NjE0MWQxMzU1NTkgTW9uIFNlcCAxNyAw
MDowMDowMCAyMDAxCkZyb206IFVyaSBTaW1jaG9uaSA8dXJpQHNhbWJhLm9yZz4KRGF0ZTog
TW9uLCA3IE9jdCAyMDE5IDAwOjM3OjE3ICswMzAwClN1YmplY3Q6IFtQQVRDSCAyLzVdIHdh
ZnNhbWJhOiB1c2UgdGVzdF9hcmdzIGluc3RlYWQgb2YgZXhlY19hcmdzIHRvIHN1cHBvcnQK
IGNyb3NzLWNvbXBpbGF0aW9uCgpleGVjX2FyZ3Mgc2VlbXMgdG8gaGF2ZSBiZWVuIGEgY3Vz
dG9tIGFkZGl0aW9uIHRvIFNhbWJhJ3MgY29weSBvZiB3YWYuClVwc3RyZWFtIFdhZiBoYXMg
YW4gaWRlbnRpY2FsbHktcHVycG9zZWQgcGFyYW1ldGVyIGNhbGxlZCB0ZXN0X2FyZ3MuCgpU
aGlzIHBhcmFtZXRlciBpcyBiZWluZyB1c2VkIGZvciBhZGRpaW5nIHJ1bnRpbWUgYXJncyB0
byB0ZXN0IHByb2dyYW1zIHRoYXQKYXJlIGJlaW5nIHJ1biBkdXJpbmcgY29uZmlndXJhdGlv
biBwaGFzZXMuCgpCVUc6IGh0dHBzOi8vYnVnemlsbGEuc2FtYmEub3JnL3Nob3dfYnVnLmNn
aT9pZD0xMzg0NgoKU2lnbmVkLW9mZi1ieTogVXJpIFNpbWNob25pIDx1cmlAc2FtYmEub3Jn
PgotLS0KIGJ1aWxkdG9vbHMvd2Fmc2FtYmEvc2FtYmFfYXV0b2NvbmYucHkgfCA2ICsrKy0t
LQogYnVpbGR0b29scy93YWZzYW1iYS9zYW1iYV9jcm9zcy5weSAgICB8IDIgKy0KIDIgZmls
ZXMgY2hhbmdlZCwgNCBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdp
dCBhL2J1aWxkdG9vbHMvd2Fmc2FtYmEvc2FtYmFfYXV0b2NvbmYucHkgYi9idWlsZHRvb2xz
L3dhZnNhbWJhL3NhbWJhX2F1dG9jb25mLnB5CmluZGV4IDYzNjY0YTQxMTYwLi42ODNmMGQ1
MzE2YiAxMDA2NDQKLS0tIGEvYnVpbGR0b29scy93YWZzYW1iYS9zYW1iYV9hdXRvY29uZi5w
eQorKysgYi9idWlsZHRvb2xzL3dhZnNhbWJhL3NhbWJhX2F1dG9jb25mLnB5CkBAIC00MjIs
OSArNDIyLDkgQEAgZGVmIENIRUNLX0NPREUoY29uZiwgY29kZSwgZGVmaW5lLAogICAgIGNm
bGFncy5leHRlbmQoY2NmbGFncykKIAogICAgIGlmIG9uX3RhcmdldDoKLSAgICAgICAgZXhl
Y19hcmdzID0gY29uZi5TQU1CQV9DUk9TU19BUkdTKG1zZz1tc2cpCisgICAgICAgIHRlc3Rf
YXJncyA9IGNvbmYuU0FNQkFfQ1JPU1NfQVJHUyhtc2c9bXNnKQogICAgIGVsc2U6Ci0gICAg
ICAgIGV4ZWNfYXJncyA9IFtdCisgICAgICAgIHRlc3RfYXJncyA9IFtdCiAKICAgICBjb25m
LkNPTVBPVU5EX1NUQVJUKG1zZykKIApAQCAtNDM5LDcgKzQzOSw3IEBAIGRlZiBDSEVDS19D
T0RFKGNvbmYsIGNvZGUsIGRlZmluZSwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU9dHlw
ZSwKICAgICAgICAgICAgICAgICAgICAgIG1zZz1tc2csCiAgICAgICAgICAgICAgICAgICAg
ICBxdW90ZT1xdW90ZSwKLSAgICAgICAgICAgICAgICAgICAgIGV4ZWNfYXJncz1leGVjX2Fy
Z3MsCisgICAgICAgICAgICAgICAgICAgICB0ZXN0X2FyZ3M9dGVzdF9hcmdzLAogICAgICAg
ICAgICAgICAgICAgICAgZGVmaW5lX3JldD1kZWZpbmVfcmV0KQogICAgIGV4Y2VwdCBFeGNl
cHRpb246CiAgICAgICAgIGlmIGFsd2F5czoKZGlmZiAtLWdpdCBhL2J1aWxkdG9vbHMvd2Fm
c2FtYmEvc2FtYmFfY3Jvc3MucHkgYi9idWlsZHRvb2xzL3dhZnNhbWJhL3NhbWJhX2Nyb3Nz
LnB5CmluZGV4IDg4NjNjMmM1M2U3Li42MGRkZjk2NzIzNyAxMDA2NDQKLS0tIGEvYnVpbGR0
b29scy93YWZzYW1iYS9zYW1iYV9jcm9zcy5weQorKysgYi9idWlsZHRvb2xzL3dhZnNhbWJh
L3NhbWJhX2Nyb3NzLnB5CkBAIC0xMzksNyArMTM5LDcgQEAgY2xhc3MgY3Jvc3NfUG9wZW4o
VXRpbHMuc3VicHJvY2Vzcy5Qb3Blbik6CiAKIEBjb25mCiBkZWYgU0FNQkFfQ1JPU1NfQVJH
Uyhjb25mLCBtc2c9Tm9uZSk6Ci0gICAgJycnZ2V0IGV4ZWNfYXJncyB0byBwYXNzIHdoZW4g
cnVubmluZyBjcm9zcyBjb21waWxlZCBiaW5hcmllcycnJworICAgICcnJ2dldCB0ZXN0X2Fy
Z3MgdG8gcGFzcyB3aGVuIHJ1bm5pbmcgY3Jvc3MgY29tcGlsZWQgYmluYXJpZXMnJycKICAg
ICBpZiBub3QgY29uZi5lbnYuQ1JPU1NfQ09NUElMRToKICAgICAgICAgcmV0dXJuIFtdCiAK
LS0gCjIuMjEuMAoKCkZyb20gZTMxMTEyZjk5MGNlNWM1NDJmMDIzYzhlZjc3YjMzNTBjMDI1
NDgyNSBNb24gU2VwIDE3IDAwOjAwOjAwIDIwMDEKRnJvbTogVXJpIFNpbWNob25pIDx1cmlA
c2FtYmEub3JnPgpEYXRlOiBNb24sIDcgT2N0IDIwMTkgMDA6Mzc6MzEgKzAzMDAKU3ViamVj
dDogW1BBVENIIDMvNV0gd2Fmc2FtYmE6IGF2b2lkIHByZS1mb3JraW5nIGlmIGNyb3NzLWNv
bXBpbGF0aW9uIGlzCiBlbmFibGVkCgpXYWYgc3VwcG9ydHMgcHJlLWZvcmtpbmcgdG8gcnVu
IGNvbmZpZ3VyYXRpb24gdGVzdHMsIGJ1dCB0aGlzCmRvZXNuJ3QgcGxheSB3ZWxsIHdpdGgg
U2FtYmEncyBjcm9zcy1jb21waWxhdGlvbiBzdXBwb3J0LCBiZWNhdXNlClNhbWJhIG1vbmtl
eS1wYXRjaGVzIHRoZSBhY3R1YWwgZm9yaytleGVjLCB3aGljaCBkb2Vzbid0IGhhcHBlbgpp
biBhIHByZS1mb3JrZWQgcHJvY2VzcyBwb29sLgoKVGhpcyBwYXRjaCBlbXVsYXRlcyB0aGUg
aW1wYWN0IG9mIFdBRl9OT19QUkVGT1JLIGVudiB2YXIgd2hlbgpjcm9zcy1jb21waWxhdGlv
biBpcyBlbmFibGVkLgoKVGhlIGJsdWVwcmludCBmb3IgdGhlIHNvbHV0aW9uIGhhcyBiZWVu
IHN1Z2dlc3RlZCBieSBUaG9tYXMgTmFneQppbiBodHRwczovL2J1Z3ppbGxhLnNhbWJhLm9y
Zy9zaG93X2J1Zy5jZ2k/aWQ9MTM4NDYjYzcgKGl0ZW0gIzIpCgpCVUc6IGh0dHBzOi8vYnVn
emlsbGEuc2FtYmEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzg0NgoKU2lnbmVkLW9mZi1ieTog
VXJpIFNpbWNob25pIDx1cmlAc2FtYmEub3JnPgotLS0KIGJ1aWxkdG9vbHMvd2Fmc2FtYmEv
c2FtYmFfY3Jvc3MucHkgfCAyICsrCiAxIGZpbGUgY2hhbmdlZCwgMiBpbnNlcnRpb25zKCsp
CgpkaWZmIC0tZ2l0IGEvYnVpbGR0b29scy93YWZzYW1iYS9zYW1iYV9jcm9zcy5weSBiL2J1
aWxkdG9vbHMvd2Fmc2FtYmEvc2FtYmFfY3Jvc3MucHkKaW5kZXggNjBkZGY5NjcyMzcuLjZm
Y2E0NzBmMmI3IDEwMDY0NAotLS0gYS9idWlsZHRvb2xzL3dhZnNhbWJhL3NhbWJhX2Nyb3Nz
LnB5CisrKyBiL2J1aWxkdG9vbHMvd2Fmc2FtYmEvc2FtYmFfY3Jvc3MucHkKQEAgLTE0Nyw2
ICsxNDcsOCBAQCBkZWYgU0FNQkFfQ1JPU1NfQVJHUyhjb25mLCBtc2c9Tm9uZSk6CiAgICAg
aWYgcmVhbF9Qb3BlbiBpcyBOb25lOgogICAgICAgICByZWFsX1BvcGVuICA9IFV0aWxzLnN1
YnByb2Nlc3MuUG9wZW4KICAgICAgICAgVXRpbHMuc3VicHJvY2Vzcy5Qb3BlbiA9IGNyb3Nz
X1BvcGVuCisgICAgICAgIFV0aWxzLnJ1bl9wcm9jZXNzID0gVXRpbHMucnVuX3JlZ3VsYXJf
cHJvY2VzcworICAgICAgICBVdGlscy5nZXRfcHJvY2VzcyA9IFV0aWxzLmFsbG9jX3Byb2Nl
c3NfcG9vbCA9IFV0aWxzLm5hZGEKIAogICAgIHJldCA9IFtdCiAKLS0gCjIuMjEuMAoKCkZy
b20gY2QzYWEwMDBmNGRmMWM0NmM0NzFiMTQyYTk5ZmJmY2JiMDhjNGQzZCBNb24gU2VwIDE3
IDAwOjAwOjAwIDIwMDEKRnJvbTogVXJpIFNpbWNob25pIDx1cmlAc2FtYmEub3JnPgpEYXRl
OiBNb24sIDcgT2N0IDIwMTkgMDA6Mzc6NDEgKzAzMDAKU3ViamVjdDogW1BBVENIIDQvNV0g
d2Fmc2FtYmE6IHBhc3MgZW52aXJvbm1lbnQgdG8gY3Jvc3MtZXhlY3V0ZSB0ZXN0cwoKVGhp
cyBjYW4gY29tZSBpbiBoYW5keSBmb3IgY3Jvc3MtZXhlY3V0ZSBzY3JpcHRzIGluIGdlbmVy
YWwsIGFuZAppcyBwYXJ0aWN1bGFybHkgcmVxdWlyZWQgYnkgdGhlIHNhbWJhLXhjIHRlc3Qg
Zm9yIGNyb3NzLWFuc3dlcnMgLwpjcm9zcy1leGVjdXRlLCBiZWNhdXNlIFNhbWJhIHNldHMg
TERfTElCUkFSWV9QQVRIIGR1cmluZyBycGF0aApjaGVja3MsIGFuZCB0aGUgdGVzdCBwcm9n
cmFtIG5lZWRzIHRoYXQgaW4gb3JkZXIgdG8gc3VjY2Vzc2Z1bGx5CnJ1bi4KCkJVRzogaHR0
cHM6Ly9idWd6aWxsYS5zYW1iYS5vcmcvc2hvd19idWcuY2dpP2lkPTEzODQ2CgpTaWduZWQt
b2ZmLWJ5OiBVcmkgU2ltY2hvbmkgPHVyaUBzYW1iYS5vcmc+Ci0tLQogYnVpbGR0b29scy93
YWZzYW1iYS9zYW1iYV9jcm9zcy5weSB8IDMgKystCiAxIGZpbGUgY2hhbmdlZCwgMiBpbnNl
cnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCgpkaWZmIC0tZ2l0IGEvYnVpbGR0b29scy93YWZz
YW1iYS9zYW1iYV9jcm9zcy5weSBiL2J1aWxkdG9vbHMvd2Fmc2FtYmEvc2FtYmFfY3Jvc3Mu
cHkKaW5kZXggNmZjYTQ3MGYyYjcuLjA4NjhhODU1YTBkIDEwMDY0NAotLS0gYS9idWlsZHRv
b2xzL3dhZnNhbWJhL3NhbWJhX2Nyb3NzLnB5CisrKyBiL2J1aWxkdG9vbHMvd2Fmc2FtYmEv
c2FtYmFfY3Jvc3MucHkKQEAgLTEyMCw3ICsxMjAsOCBAQCBjbGFzcyBjcm9zc19Qb3BlbihV
dGlscy5zdWJwcm9jZXNzLlBvcGVuKToKICAgICAgICAgICAgIGlmIHVzZV9hbnN3ZXJzOgog
ICAgICAgICAgICAgICAgIHAgPSByZWFsX1BvcGVuKG5ld2FyZ3MsCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc3Rkb3V0PVV0aWxzLnN1YnByb2Nlc3MuUElQRSwKLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRlcnI9VXRpbHMuc3VicHJvY2Vzcy5QSVBF
KQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZGVycj1VdGlscy5zdWJwcm9j
ZXNzLlBJUEUsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW52PWt3LmdldCgn
ZW52Jywge30pKQogICAgICAgICAgICAgICAgIGNlX291dCwgY2VfZXJyID0gcC5jb21tdW5p
Y2F0ZSgpCiAgICAgICAgICAgICAgICAgYW5zID0gKHAucmV0dXJuY29kZSwgc2FtYmFfdXRp
bHMuZ2V0X3N0cmluZyhjZV9vdXQpKQogICAgICAgICAgICAgICAgIGFkZF9hbnN3ZXIoY2Ff
ZmlsZSwgbXNnLCBhbnMpCi0tIAoyLjIxLjAKCgpGcm9tIDAyZmRmYzIwMTZhNTQ0MDliMzEx
ZDBjZmY5OTMxNzRjMzNiOGE1MDYgTW9uIFNlcCAxNyAwMDowMDowMCAyMDAxCkZyb206IFVy
aSBTaW1jaG9uaSA8dXJpQHNhbWJhLm9yZz4KRGF0ZTogV2VkLCA5IE9jdCAyMDE5IDIxOjUz
OjQzICswMzAwClN1YmplY3Q6IFtQQVRDSCA1LzVdIGF1dG9idWlsZDogaGFyZGVuIHNhbWJh
LXhjIHRlc3Qgc3VpdGUKCkFkZCBtb3JlIGNoZWNrcyB3aGljaCBkaXJlY3RseSB0ZXN0IHRo
ZSBiZWhhdmlvciBvZgotLWNyb3NzLWFuc3dlcnMgYW5kIC0tY3Jvc3MtZXhlY3V0ZS4KClBy
ZXZpb3VzIHRlc3QgdGVzdGVkIHRoaW5ncyBpbiBhIHJvdW5kLWFib3V0IHdheSwgY2hlY2tp
bmcKdGhhdCBydW5uaW5nIGluIGFsbCB0aHJlZSBtb2RlcyAobmF0aXZlLCBjcm9zcy1leGVj
dXRlLApjcm9zcy1hbnN3ZXJzKSB5aWVsZHMgdGhlIHNhbWUgcmVzdWx0LiBJdCB3YXMgdnVs
bmVyYWJsZQp0byBhIGRlZ3JhZGF0aW9uIGluIHdoaWNoIGNyb3NzLWNvbXBpbGF0aW9uIG1v
ZGVzIGRpZG4ndAp3b3JrIGF0IGFsbCBhbmQgd2VyZSBydW5uaW5nIG5hdGl2ZSB0ZXN0cywg
d2hpY2ggaXMKd2hhdCBoYXBwZW5lZCB3aXRoIHRoZSB1cGdyYWRlIG9mIHdhZi4KClRoZSBh
ZGRlZCB0ZXN0cyBjaGVjayB0aGUgZm9sbG93aW5nOgotIFRoYXQgY3Jvc3MtZXhjdXRlIHdp
dGggY3Jvc3MtYW5zd2VycyBzZXRzIHRoZSBjcm9zcy1hbnN3ZXJzIGZpbGUKLSBUaGF0IHRo
ZSBjb250ZW50IG9mIGNyb3NzLWFuc3dlcnMgZmlsZSBhY3R1YWxseSBhZmZlY3RzIHRoZSBi
dWlsZAogIGNvbmZpZ3VyYXRpb24KLSBUaGF0IGEgbWlzc2luZyBsaW5lIGluIGNyb3NzLWFu
c3dlcnMgZmFpbHMgdGhlIGJ1aWxkCgpCVUc6IGh0dHBzOi8vYnVnemlsbGEuc2FtYmEub3Jn
L3Nob3dfYnVnLmNnaT9pZD0xMzg0NgoKU2lnbmVkLW9mZi1ieTogVXJpIFNpbWNob25pIDx1
cmlAc2FtYmEub3JnPgotLS0KIHNjcmlwdC9hdXRvYnVpbGQucHkgfCAxMCArKysrKysrKysr
CiAxIGZpbGUgY2hhbmdlZCwgMTAgaW5zZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL3Njcmlw
dC9hdXRvYnVpbGQucHkgYi9zY3JpcHQvYXV0b2J1aWxkLnB5CmluZGV4IDI5ZTYyMzRkZWQ5
Li44YzU2MDNlOTMxYyAxMDA3NTUKLS0tIGEvc2NyaXB0L2F1dG9idWlsZC5weQorKysgYi9z
Y3JpcHQvYXV0b2J1aWxkLnB5CkBAIC00NDAsMTIgKzQ0MCwyMiBAQCB0YXNrcyA9IHsKICAg
ICAgICAgKCJjb25maWd1cmUtbmF0aXZlIiwgIi4vY29uZmlndXJlLmRldmVsb3BlciAtLXdp
dGgtc2VsZnRlc3QtcHJlZml4PS4vYmluL2FiIiArIHNhbWJhX2NvbmZpZ3VyZV9wYXJhbXMp
LAogICAgICAgICAoImNvbmZpZ3VyZS1jcm9zcy1leGVjdXRlIiwgIi4vY29uZmlndXJlLmRl
dmVsb3BlciAtLW91dCAuL2Jpbi14ZSAtLWNyb3NzLWNvbXBpbGUgLS1jcm9zcy1leGVjdXRl
PXNjcmlwdC9pZGVudGl0eV9jYy5zaCIgXAogICAgICAgICAgICAgIiAtLWNyb3NzLWFuc3dl
cnM9Li9iaW4teGUvY3Jvc3MtYW5zd2Vycy50eHQgLS13aXRoLXNlbGZ0ZXN0LXByZWZpeD0u
L2Jpbi14ZS9hYiIgKyBzYW1iYV9jb25maWd1cmVfcGFyYW1zKSwKKyAgICAgICAgKCJ2ZXJp
ZnktY3Jvc3MtZXhlY3V0ZS1vdXRwdXQiLCAiZ3JlcCAnXkNoZWNraW5nIHZhbHVlIG9mIE5T
SUcnIC4vYmluLXhlL2Nyb3NzLWFuc3dlcnMudHh0IiksCiAgICAgICAgICgiY29uZmlndXJl
LWNyb3NzLWFuc3dlcnMiLCAiLi9jb25maWd1cmUuZGV2ZWxvcGVyIC0tb3V0IC4vYmluLXhh
IC0tY3Jvc3MtY29tcGlsZSIgXAogICAgICAgICAgICAgIiAtLWNyb3NzLWFuc3dlcnM9Li9i
aW4teGUvY3Jvc3MtYW5zd2Vycy50eHQgLS13aXRoLXNlbGZ0ZXN0LXByZWZpeD0uL2Jpbi14
YS9hYiIgKyBzYW1iYV9jb25maWd1cmVfcGFyYW1zKSwKICAgICAgICAgKCJjb21wYXJlLXJl
c3VsdHMiLCAic2NyaXB0L2NvbXBhcmVfY2NfcmVzdWx0cy5weSAiCiAgICAgICAgICAgICAi
Li9iaW4vYzRjaGUvZGVmYXVsdHt9ICIKICAgICAgICAgICAgICIuL2Jpbi14ZS9jNGNoZS9k
ZWZhdWx0e30gIgogICAgICAgICAgICAgIi4vYmluLXhhL2M0Y2hlL2RlZmF1bHR7fSIuZm9y
bWF0KCooW0NBQ0hFX1NVRkZJWF0qMykpKSwKKyAgICAgICAgKCJtb2RpZnktY3Jvc3MtYW5z
d2VycyIsICJzZWQgLWkuYmFrIC1lICdzL15cXChDaGVja2luZyB2YWx1ZSBvZiBOU0lHOlxc
KSAuKi9cXDEgXCIxMjM0XCIvJyAuL2Jpbi14ZS9jcm9zcy1hbnN3ZXJzLnR4dCIpLAorICAg
ICAgICAoImNvbmZpZ3VyZS1jcm9zcy1hbnN3ZXJzLW1vZGlmaWVkIiwgIi4vY29uZmlndXJl
LmRldmVsb3BlciAtLW91dCAuL2Jpbi14YTIgLS1jcm9zcy1jb21waWxlIiBcCisgICAgICAg
ICAgICAiIC0tY3Jvc3MtYW5zd2Vycz0uL2Jpbi14ZS9jcm9zcy1hbnN3ZXJzLnR4dCAtLXdp
dGgtc2VsZnRlc3QtcHJlZml4PS4vYmluLXhhMi9hYiIgKyBzYW1iYV9jb25maWd1cmVfcGFy
YW1zKSwKKyAgICAgICAgKCJ2ZXJpZnktY3Jvc3MtYW5zd2VycyIsICJ0ZXN0ICQoc2VkIC1u
IC1lICdzL1ZBTFVFT0ZfTlNJRyA9IFxcKC4qXFwpL1xcMS9wJyAuL2Jpbi14YTIvYzRjaGUv
ZGVmYXVsdHt9KSIgXAorICAgICAgICAgICAgIiA9IFwiJzEyMzQnXCIiLmZvcm1hdChDQUNI
RV9TVUZGSVgpKSwKKyAgICAgICAgKCJpbnZhbGlkYXRlLWNyb3NzLWFuc3dlcnMiLCAic2Vk
IC1pLmJhayAtZSAnL15DaGVja2luZyB2YWx1ZSBvZiBOU0lHL2QnIC4vYmluLXhlL2Nyb3Nz
LWFuc3dlcnMudHh0IiksCisgICAgICAgICgiY29uZmlndXJlLWNyb3NzLWFuc3dlcnMtZmFp
bCIsICIuL2NvbmZpZ3VyZS5kZXZlbG9wZXIgLS1vdXQgLi9iaW4teGEzIC0tY3Jvc3MtY29t
cGlsZSIgXAorICAgICAgICAgICAgIiAtLWNyb3NzLWFuc3dlcnM9Li9iaW4teGUvY3Jvc3Mt
YW5zd2Vycy50eHQgLS13aXRoLXNlbGZ0ZXN0LXByZWZpeD0uL2Jpbi14YTMvYWIiICsgc2Ft
YmFfY29uZmlndXJlX3BhcmFtcyArIFwKKyAgICAgICAgICAgICIgOyB0ZXN0ICQ/IC1uZSAw
IiksCiAgICAgICAgIF0sCiAKICAgICAjIHRlc3QgYnVpbGQgd2l0aCAtTzMgLS0gY2F0Y2hl
cyBleHRyYSB3YXJuaW5ncyBhbmQgYnVncywgdGVzdHMgdGhlIGFkX2RjIGVudmlyb25tZW50
cwotLSAKMi4yMS4wCgo=
--------------E5AF50447CF494A0EA0B779C--

